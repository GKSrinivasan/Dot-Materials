function CalculatePromotionPCT(n,t,i){var u=$("#ddlLocalCurrencies").data("kendoDropDownList").dataItem($("#ddlLocalCurrencies").data("kendoDropDownList").select()),a=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(n.PromotionAmtLocal/n.MeritExchangeRate*u.ExchangeRate,"general","annual"):roundingRule(n.PromotionAmtLocal/n.MeritExchangeRate*u.ExchangeRate,"general","hourly"),e=n.PromotionAmtLocal,r=getNumberValue(t,preferredCulture),s,f,o,c,l,h;if(r!==null){if(r=t.indexOf("%")>-1?r*100:r,r=roundingRule(r,"promotion","percentage"),s=n.PromotionPct,isNaN(r)||r>999)return showAlert("Given increase exceeds the maximum limit"),n.PromotionPct=s,!1;n.PromotionPct=r;n.EmployeeStatus.toLowerCase()=="annual"?GridDisplay=="USD"?(o=n.CurrentAnnualSalaryUSDForCalc*r/100,f=o/n.MeritExchangeRate):f=n.CurrentAnnualSalaryLocalForCalc*r/100:GridDisplay=="USD"?(o=n.CurrentHourlyRateUSDForCalc*r/100,f=o/n.MeritExchangeRate):f=n.CurrentHourlyRateLocalForCalc*r/100;n.PromotionAmtLocal=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(f,"promotion","annual"):roundingRule(f,"promotion","hourly");n.PromotionAmtUSD=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(n.PromotionAmtLocal/n.MeritExchangeRate*u.ExchangeRate,"general","annual"):roundingRule(n.PromotionAmtLocal/n.MeritExchangeRate*u.ExchangeRate,"general","hourly");c=calculateHourly(n.PromotionAmtLocal);l=calculateHourly(n.PromotionAmtUSD)}else n.PromotionPct=null,n.PromotionAmtLocal=null,n.PromotionAmtUSD=null,n.HrlyPromotionAmtLocal=null,n.HrlyPromotionAmtUSD=null;n.EmployeeStatus.toLowerCase()=="annual"?fn_BudgetPromotionSpentChanges(e!=null?e/n.MeritExchangeRate*u.ExchangeRate:0,n.PromotionAmtLocal!=null?n.PromotionAmtLocal/n.MeritExchangeRate*u.ExchangeRate:0):fn_BudgetPromotionSpentChanges(e!=null?n.TotalWorkHrs!=null?e*n.TotalWorkHrs/n.MeritExchangeRate*u.ExchangeRate:e*2080/n.MeritExchangeRate*u.ExchangeRate:0,n.PromotionAmtLocal!=null?n.TotalWorkHrs!=null?n.PromotionAmtLocal*n.TotalWorkHrs/n.MeritExchangeRate*u.ExchangeRate:n.PromotionAmtLocal*2080/n.MeritExchangeRate*u.ExchangeRate:0);CalculateNewSalary(n);CalculateTCC(n);h=i.index();checkPromotionGuideLine(n,h);n.IsPromotionEdited=!0;n.dirty=!0;objChangeFlag=!0}function fn_BudgetPromotionSpentChanges(n,t){var l=$("#ddlLocalCurrencies").data("kendoDropDownList").dataItem($("#ddlLocalCurrencies").data("kendoDropDownList").select()),a=l!=undefined?l.CultureCode:preferredCulture,p=t-n,v=document.getElementById("hdnPromotionSpent"),f=document.getElementById("hdnMeritSpent").value,r=document.getElementById("hdnLumpSumSpent").value,o=document.getElementById("hdnMeritBudget").value,w=v.value,b=document.getElementById("promotionSpentAmt"),nt=document.getElementById("totalSpentAmt"),k=document.getElementById("meritBalance"),u=eval(w)+eval(p),h,i,c,s,e;v.value=u;newSpentAmt1=eval(u)!=0?roundBudget(eval(u)):0;u=newSpentAmt1!=NaN?u:0;hdnMeritSpent1=eval(f)!=0?roundBudget(eval(f)):0;f=hdnMeritSpent1!=NaN?f:0;hdnLumpSumSpent1=eval(r)!=0?roundBudget(eval(r)):0;r=hdnLumpSumSpent1!=NaN?r:0;o=eval(o)!=0?roundBudget(eval(o)):0;r=RuleConfiguration.MeritValuesReCalculate==!1&&RuleConfiguration.LumpSumRuleLumpSumType=="AutoCalc"?0:r;h=eval(u)+eval(f)+eval(r);i=eval(o)-eval(h);k.innerHTML=formatBudgetCurrency(eval(i),"c0",a);c="(";i=Math.round(i);i<0?($("#meritBalance").removeClass("counter2"),$("#meritBalance").addClass("counter3"),$("#balancePct").removeClass("counter2"),$("#balancePct").addClass("counter3")):($("#meritBalance").removeClass("counter3"),$("#meritBalance").addClass("counter2"),$("#balancePct").addClass("counter2"),$("#balancePct").removeClass("counter3"));b.innerHTML=formatBudgetCurrency(eval(u),"c0",a);h=roundToWholeNumber(eval(u))+roundToWholeNumber(eval(f))+roundToWholeNumber(eval(r));var d=document.getElementById("balanceDonughtClass").className,y=totalCurrentSalary!=0?(eval(Math.abs(i))/eval(totalCurrentSalary)*100).toFixed(0):0,c=totalCurrentSalary!=0?(eval(Math.abs(i))/eval(totalCurrentSalary)*100).toFixed(0):0,g=Math.round(BudgetPercentage!=0?c/BudgetPercentage*100:0);i>0?$("#balancePct").text(y.toString()+"%"):$("#balancePct").text("("+y+"%)");BudgetPercentage==c?e="c100 small p100":(s=i>0?1:i==0?0:-1,s==1?e="c100 small p"+g:s==0?e="c100 small p100":s==-1&&(e="c100 small x100 p100"));$("#balanceDonughtClass").removeClass(d);$("#balanceDonughtClass").addClass(e)}function CalculatePromotionAmtLocal(n,t,i){var u=$("#ddlLocalCurrencies").data("kendoDropDownList").dataItem($("#ddlLocalCurrencies").data("kendoDropDownList").select()),c=n.PromotionAmtUSD,f=n.PromotionAmtLocal,r=getNumberValue(t,RuleConfiguration.FeatureConfigurationMultiCurrencyDisplay&&GridDisplay=="Local"?n.CultureCode:preferredCulture),e,s,h,o;if(r!=null){if(r=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(r,"promotion","annual"):roundingRule(r,"promotion","hourly"),isNaN(r))return showAlert("Please enter the data valid format"),n.PromotionAmtLocal=oldPromotionAmtLocal,!1;if(e=n.EmployeeStatus.toLowerCase()=="annual"?r/n.CurrentAnnualSalaryLocalForCalc*100==Infinity?0:r/n.CurrentAnnualSalaryLocalForCalc*100:r/n.CurrentHourlyRateLocalForCalc*100==Infinity?0:r/n.CurrentHourlyRateLocalForCalc*100,r=e==0?0:r,e>999)return showAlert("Given increase exceeds the maximum limit"),n.PromotionAmtLocal=oldPromotionAmtLocal,!1;n.PromotionPct=roundingRule(e,"promotion","percentage");n.PromotionAmtLocal=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(r,"promotion","annual"):roundingRule(r,"promotion","hourly");n.PromotionAmtUSD=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(n.PromotionAmtLocal*n.MeritExchangeRate,"general","annual"):roundingRule(n.PromotionAmtLocal*n.MeritExchangeRate,"general","hourly");s=calculateHourly(n.PromotionAmtLocal);h=calculateHourly(n.PromotionAmtUSD)}else n.PromotionPct=null,n.PromotionAmtLocal=null,n.PromotionAmtUSD=null,n.HrlyPromotionAmtLocal=null,n.HrlyPromotionAmtUSD=null;n.EmployeeStatus.toLowerCase()=="annual"?fn_BudgetPromotionSpentChanges(f!=null?f/n.MeritExchangeRate*u.ExchangeRate:0,n.PromotionAmtLocal!=null?n.PromotionAmtLocal/n.MeritExchangeRate*u.ExchangeRate:0):fn_BudgetPromotionSpentChanges(f!=null?n.TotalWorkHrs!=null?f*n.TotalWorkHrs/n.MeritExchangeRate*u.ExchangeRate:f*2080/n.MeritExchangeRate*u.ExchangeRate:0,n.PromotionAmtLocal!=null?n.TotalWorkHrs!=null?n.PromotionAmtLocal*n.TotalWorkHrs/n.MeritExchangeRate*u.ExchangeRate:n.PromotionAmtLocal*2080/n.MeritExchangeRate*u.ExchangeRate:0);CalculateNewSalary(n);CalculateTCC(n);o=i.index();checkPromotionGuideLine(n,o);n.IsPromotionEdited=!0;n.dirty=!0;objChangeFlag=!0}function CalculatePromotionAmtUSD(n,t,i){var u=n.PromotionAmtUSD,r=getNumberValue(t,RuleConfiguration.FeatureConfigurationMultiCurrencyDisplay&&GridDisplay=="Local"?n.CultureCode:preferredCulture),f,e,s,h,o;if(r!=null){if(r=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(r,"general","annual"):roundingRule(r,"general","hourly"),isNaN(r))return showAlert("Please enter the data valid format"),n.PromotionAmtUSD=u,!1;if(f=n.EmployeeStatus.toLowerCase()=="annual"?r/n.CurrentAnnualSalaryLocalForCalc*100==Infinity?0:r/n.CurrentAnnualSalaryLocalForCalc*100:r/n.CurrentHourlyRateLocalForCalc*100==Infinity?0:r/n.CurrentHourlyRateLocalForCalc*100,r=f==0?0:r,f>999)return showAlert("Given increase exceeds the maximum limit"),n.PromotionAmtUSD=u,!1;e=r/n.MeritExchangeRate;n.PromotionPct=roundingRule(f,"promotion","percentage");n.PromotionAmtLocal=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(e,"promotion","annual"):roundingRule(e,"promotion","hourly");n.PromotionAmtUSD=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(n.PromotionAmtLocal*n.MeritExchangeRate,"general","annual"):roundingRule(n.PromotionAmtLocal*n.MeritExchangeRate,"general","hourly");s=calculateHourly(n.PromotionAmtLocal);h=calculateHourly(n.PromotionAmtUSD)}else n.PromotionPct=null,n.PromotionAmtLocal=null,n.PromotionAmtUSD=null,n.HrlyPromotionAmtLocal=null,n.HrlyPromotionAmtUSD=null;n.EmployeeStatus.toLowerCase()=="annual"?fn_BudgetPromotionSpentChanges(u!=null?u:0,n.PromotionAmtUSD!=null?n.PromotionAmtUSD:0):fn_BudgetPromotionSpentChanges(u!=null?n.TotalWorkHrs!=null?u*n.TotalWorkHrs:u*2080:0,n.PromotionAmtUSD!=null?n.TotalWorkHrs!=null?n.PromotionAmtUSD*n.TotalWorkHrs:n.PromotionAmtUSD*2080:0);CalculateNewSalary(n);CalculateTCC(n);o=i.index();checkPromotionGuideLine(n,o);n.IsPromotionEdited=!0;n.dirty=!0;objChangeFlag=!0}function CalculateLumpSumPCT(n,t,i){var u=$("#ddlLocalCurrencies").data("kendoDropDownList").dataItem($("#ddlLocalCurrencies").data("kendoDropDownList").select()),c=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(n.LumpSumAmtLocal/n.MeritExchangeRate*u.ExchangeRate,"general","annual"):roundingRule(n.LumpSumAmtLocal/n.MeritExchangeRate*u.ExchangeRate,"general","hourly"),o=n.LumpSumAmtLocal,r=getNumberValue(t,preferredCulture),s,f,e,h;if(r!=null){if(r=t.indexOf("%")>-1?r*100:r,r=roundingRule(r,"lumpsum","percentage"),s=n.LumpSumPct,isNaN(r)||r>999)return showAlert("Given increase exceeds the maximum limit"),n.LumpSumPct=s,!1;n.LumpSumPct=r;GridDisplay=="USD"?(f=n.CurrentAnnualSalaryUSDForCalc*r/100,e=f/n.MeritExchangeRate):e=n.CurrentAnnualSalaryLocalForLumpSumCalc*r/100;n.LumpSumAmtLocal=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(e,"lumpsum","annual"):roundingRule(e,"lumpsum","hourly");f=n.LumpSumAmtLocal/n.MeritExchangeRate*u.ExchangeRate;n.LumpSumAmtUSD=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(f,"general","annual"):roundingRule(f,"general","hourly")}else n.LumpSumPct=null,n.LumpSumAmtLocal=null,n.LumpSumAmtUSD=null,n.HrlyLumpSumAmtLocal=null,n.HrlyLumpSumAmtUSD=null,HideSubmitApproveCheckBoxes(n);fn_BudgetLumpSumSpentChanges(o!=null?o/n.MeritExchangeRate*u.ExchangeRate:0,n.LumpSumAmtLocal!=null?n.LumpSumAmtLocal/n.MeritExchangeRate*u.ExchangeRate:0);CalculateTCC(n);h=i.index();checkLumpSumGuideLine(n,h);n.IsMeritEdited=!0;n.dirty=!0;objChangeFlag=!0}function fn_BudgetLumpSumSpentChanges(n,t){var l=$("#ddlLocalCurrencies").data("kendoDropDownList").dataItem($("#ddlLocalCurrencies").data("kendoDropDownList").select()),a=l!=undefined?l.CultureCode:preferredCulture,p=t-n,u=document.getElementById("hdnPromotionSpent").value,f=document.getElementById("hdnMeritSpent").value,v=document.getElementById("hdnLumpSumSpent"),nt=document.getElementById("hdnAdjustmentSpent"),o=document.getElementById("hdnMeritBudget").value,w=v.value,b=document.getElementById("lumpsumSpentAmt"),tt=document.getElementById("totalSpentAmt"),k=document.getElementById("meritBalance"),r=eval(w)+eval(p),h,i,c,s,e;v.value=r;newSpentAmt1=eval(r)!=0?roundBudget(eval(r)):0;r=r!=NaN?r:0;hdnMeritSpent1=eval(f)!=0?roundBudget(eval(f)):0;f=hdnMeritSpent1!=NaN?f:0;hdnPromotionSpent1=eval(u)!=0?roundBudget(eval(u)):0;u=hdnPromotionSpent1!=NaN?u:0;o=eval(o)!=0?roundBudget(eval(o)):0;h=eval(r)+eval(f)+eval(u);i=eval(o)-eval(h);k.innerHTML=formatBudgetCurrency(eval(i),"c0",a);c="(";i=Math.round(i);i<0?($("#meritBalance").removeClass("counter2"),$("#meritBalance").addClass("counter3"),$("#balancePct").removeClass("counter2"),$("#balancePct").addClass("counter3")):($("#meritBalance").removeClass("counter3"),$("#meritBalance").addClass("counter2"),$("#balancePct").addClass("counter2"),$("#balancePct").removeClass("counter3"));b.innerHTML=formatBudgetCurrency(eval(r),"c0",a);h=roundToWholeNumber(eval(r))+roundToWholeNumber(eval(f))+roundToWholeNumber(eval(u));var d=document.getElementById("balanceDonughtClass").className,y=(eval(Math.abs(i))/eval(totalCurrentSalary)*100).toFixed(0),c=(eval(Math.abs(i))/eval(totalCurrentSalary)*100).toFixed(0),g=Math.round(c/BudgetPercentage*100);i>0?$("#balancePct").text(y.toString()+"%"):$("#balancePct").text("("+y+"%)");BudgetPercentage==c?e="c100 small p100":(s=i>0?1:i==0?0:-1,s==1?e="c100 small p"+g:s==0?e="c100 small p100":s==-1&&(e="c100 small x100 p100"));$("#balanceDonughtClass").removeClass(d);$("#balanceDonughtClass").addClass(e)}function CalculateLumpSumAmtLocal(n,t,i){var e=$("#ddlLocalCurrencies").data("kendoDropDownList").dataItem($("#ddlLocalCurrencies").data("kendoDropDownList").select()),r=getNumberValue(t,RuleConfiguration.FeatureConfigurationMultiCurrencyDisplay&&GridDisplay=="Local"?n.CultureCode:preferredCulture),c=n.LumpSumAmtUSD,o=n.LumpSumAmtLocal,u,h,f,s;if(r!=null){if(r=roundingRule(r,"lumpsum","annual"),isNaN(r))return showAlert("Please enter the data valid format"),n.LumpSumAmtLocal=oldLumpSumAmtLocal,!1;if(u=r/n.CurrentAnnualSalaryLocalForLumpSumCalc*100==Infinity?0:r/n.CurrentAnnualSalaryLocalForLumpSumCalc*100,r=u==0?0:r,u>999)return showAlert("Given increase exceeds the maximum limit"),n.LumpSumAmtLocal=oldLumpSumAmtLocal,!1;n.LumpSumPct=roundingRule(u,"lumpsum","percentage");n.LumpSumAmtLocal=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(r,"lumpsum","annual"):roundingRule(r,"lumpsum","hourly");h=calculateHourly(n.LumpSumAmtLocal);f=n.LumpSumAmtLocal*n.MeritExchangeRate;n.LumpSumAmtUSD=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(f,"general","annual"):roundingRule(f,"general","hourly")}else n.LumpSumPct=null,n.LumpSumAmtLocal=null,n.LumpSumAmtUSD=null,n.HrlyLumpSumAmtLocal=null,n.HrlyLumpSumAmtUSD=null,HideSubmitApproveCheckBoxes(n);fn_BudgetLumpSumSpentChanges(o!=null?o/n.MeritExchangeRate*e.ExchangeRate:0,n.LumpSumAmtLocal!=null?n.LumpSumAmtLocal/n.MeritExchangeRate*e.ExchangeRate:0);CalculateTCC(n);s=i.index();checkLumpSumGuideLine(n,s);n.IsMeritEdited=!0;n.dirty=!0;objChangeFlag=!0}function CalculateLumpSumAmtUSD(n,t,i){var r=getNumberValue(t,RuleConfiguration.FeatureConfigurationMultiCurrencyDisplay&&GridDisplay=="Local"?n.CultureCode:preferredCulture),u,f,e,o;if(r!=null){if(r=roundingRule(r,"promotion","annual"),u=n.LumpSumAmtUSD,isNaN(r))return showAlert("Please enter the data valid format"),n.LumpSumAmtUSD=u,!1;if(f=r/n.CurrentAnnualSalaryUSDForCalc*100,f=roundingRule(f,"promotion","percentage"),f>999)return showAlert("Given increase exceeds the maximum limit"),n.LumpSumAmtUSD=u,!1;e=r/n.MeritExchangeRate;n.LumpSumPct=f;n.LumpSumAmtLocal=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(e,"lumpsum","annual"):roundingRule(e,"lumpsum","hourly");n.LumpSumAmtUSD=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(n.LumpSumAmtLocal*n.MeritExchangeRate,"general","annual"):roundingRule(n.LumpSumAmtLocal*n.MeritExchangeRate,"general","hourly")}else n.LumpSumPct=null,n.LumpSumAmtLocal=null,n.LumpSumAmtUSD=null,n.HrlyLumpSumAmtLocal=null,n.HrlyLumpSumAmtUSD=null,HideSubmitApproveCheckBoxes(n);fn_BudgetLumpSumSpentChanges(u!=null?u:0,n.LumpSumAmtUSD!=null?n.LumpSumAmtUSD:0);CalculateTCC(n);o=i.index();checkLumpSumGuideLine(n,o);n.IsMeritEdited=!0;n.dirty=!0;objChangeFlag=!0}function CalculateAdjustmentPCT(n,t,i){var s=n.AdjustmentAmtUSD,o=n.AdjustmentPct,r=getNumberValue(t,preferredCulture),u,f,e;if(r!=null){if(r=t.indexOf("%")>-1?r*100:r,r=roundingRule(r,"adjustment","percentage"),isNaN(r)||r>999)return showAlert("Adjustment % exceeds the maximum limit"),n.AdjustmentPct=o,!1;n.AdjustmentPct=r;n.EmployeeStatus.toLowerCase()=="annual"?GridDisplay=="USD"?(f=n.CurrentAnnualSalaryUSDForCalc*r/100,u=f/n.MeritExchangeRate):u=n.CurrentAnnualSalaryLocalForCalc*r/100:GridDisplay=="USD"?(f=n.CurrentHourlyRateUSDForCalc*r/100,u=f/n.MeritExchangeRate):u=n.CurrentHourlyRateLocalForCalc*r/100;n.AdjustmentAmtLocal=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(u,"adjustment","annual"):roundingRule(u,"adjustment","hourly");n.AdjustmentAmtUSD=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(n.AdjustmentAmtLocal*n.MeritExchangeRate,"general","annual"):(n.AdjustmentAmtLocal*n.MeritExchangeRate,"hourly")}else n.AdjustmentPct=null,n.AdjustmentAmtLocal=null,n.AdjustmentAmtUSD=null,n.HrlyAdjustmentAmtLocal=null,n.HrlyAdjustmentAmtUSD=null;CalculateNewSalary(n);CalculateTCC(n);e=i.index();checkAdjustmentGuideLine(n,e);n.IsAdjustmentEdited=!0;n.dirty=!0;objChangeFlag=!0}function CalculateBonusPCT(n,t,i){var e=n.BonusAmt,o=n.BonusPct,r=getNumberValue(t,preferredCulture),u,f;if(r!=null){if(r=t.indexOf("%")>-1?r*100:r,r=roundingRule(r,"adjustment","percentage"),isNaN(r)||r>999)return showAlert("Adjustment % exceeds the maximum limit"),n.AdjustmentPct=oldAjustmentpct,!1;n.BonusPct=r;u=n.IndividualPortion*r/100;n.BonusAmt=roundingRule(u,"adjustment","annual");n.Payout=n.BonusAmt+(n.GlobalPortion!=null?n.GlobalPortion:0)}else n.BonusAmt=null,n.BonusPct=null;CalculateTCC(n);f=i.index();checkBonusGuideLine(n,f);n.IsBonusEdited=!0;n.dirty=!0;objChangeFlag=!0}function fn_BudgetAdjustmentSpentChanges(n,t){var i=$("#ddlLocalCurrencies").data("kendoDropDownList").dataItem($("#ddlLocalCurrencies").data("kendoDropDownList").select()),h=i!=undefined?i.CultureCode:preferredCulture,a=t-n,e=document.getElementById("hdnPromotionSpent").value,f=document.getElementById("hdnMeritSpent").value,r=document.getElementById("hdnLumpSumSpent").value,v=document.getElementById("hdnAdjustmentSpent"),o=document.getElementById("hdnMeritBudget").value,y=f.value,p=document.getElementById("totalAdjustmentSpentAmt"),w=document.getElementById("totalMeritSpentAmt"),l=document.getElementById("meritBalance"),u=eval(y)+eval(a),s,c;v.value=u;u=eval(u)!=0?roundBudget(eval(u)/i.ExchangeRate):0;f=eval(f)!=0?roundBudget(eval(f)/i.ExchangeRate):0;e=eval(e)!=0?roundBudget(eval(e)/i.ExchangeRate):0;r=eval(r)!=0?roundBudget(eval(r)/i.ExchangeRate):0;o=eval(o)!=0?roundBudget(eval(o)/i.ExchangeRate):0;r=RuleConfiguration.MeritValuesReCalculate==!1&&RuleConfiguration.LumpSumRuleLumpSumType=="AutoCalc"?0:r;s=eval(u)+eval(f)+eval(e)+eval(r);c=eval(o)-eval(s);l.style.color=c<0?"Red":"";l.innerHTML=formatBudgetCurrency(eval(c),"c0",h);p.innerHTML=formatBudgetCurrency(eval(u),"c0",h);s=roundToWholeNumber(eval(u))+roundToWholeNumber(eval(f))+roundToWholeNumber(eval(e))+roundToWholeNumber(eval(r));w.innerHTML=formatBudgetCurrency(eval(s),"c0",h)}function CalculateAdjustmentAmtLocal(n,t,i){var o=n.AdjustmentAmtUSD,r=getNumberValue(t,RuleConfiguration.FeatureConfigurationMultiCurrencyDisplay&&GridDisplay=="Local"?n.CultureCode:preferredCulture),f,u,e;if(r!=null){if(r=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(r,"adjustment","annual"):roundingRule(r,"adjustment","hourly"),f=n.AdjustmentAmtLocal,isNaN(r))return showAlert("Please enter the data valid format"),n.AdjustmentAmtLocal=f,!1;if(u=n.EmployeeStatus.toLowerCase()=="annual"?r/n.CurrentAnnualSalaryLocalForCalc*100==Infinity?0:r/n.CurrentAnnualSalaryLocalForCalc*100:r/n.CurrentHourlyRateLocalForCalc*100==Infinity?0:r/n.CurrentHourlyRateLocalForCalc*100,r=u==0?0:r,u>999)return showAlert("Given increase exceeds the maximum limit"),n.AdjustmentAmtLocal=f,!1;n.AdjustmentPct=roundingRule(u,"promotion","percentage");n.AdjustmentAmtLocal=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(r,"adjustment","annual"):roundingRule(r,"adjustment","hourly");n.AdjustmentAmtUSD=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(n.AdjustmentAmtLocal*n.MeritExchangeRate,"general","annual"):roundingRule(n.AdjustmentAmtLocal*n.MeritExchangeRate,"general","hourly")}else n.AdjustmentPct=null,n.AdjustmentAmtLocal=null,n.AdjustmentAmtUSD=null,n.HrlyAdjustmentAmtLocal=null,n.HrlyAdjustmentAmtUSD=null;CalculateNewSalary(n);CalculateTCC(n);e=i.index();checkAdjustmentGuideLine(n,e);n.IsAdjustmentEdited=!0;n.dirty=!0;objChangeFlag=!0}function CalculateBonusAmt(n,t,i){var f=n.BonusAmt,r=getNumberValue(t,RuleConfiguration.FeatureConfigurationMultiCurrencyDisplay&&GridDisplay=="Local"?n.CultureCode:preferredCulture),u,e;if(r!=null){if(r=roundingRule(r,"adjustment","annual"),isNaN(r))return showAlert("Please enter the data valid format"),n.BonusAmt=f,!1;if(u=r/n.IndividualPortion*100==Infinity?0:r/n.IndividualPortion*100,r=u==0?0:r,u>999)return showAlert("Given increase exceeds the maximum limit"),n.BonusAmt=f,!1;n.BonusPct=roundingRule(u,"adjustment","percentage");n.BonusAmt=roundingRule(r,"adjustment","annual");n.Payout=n.BonusAmt+(n.GlobalPortion!=null?n.GlobalPortion:0)}else n.BonusAmt=null,n.BonusPct=null;CalculateTCC(n);e=i.index();checkBonusGuideLine(n,e);n.IsBonusEdited=!0;n.dirty=!0;objChangeFlag=!0}function CalculateAdjustmentAmtUSD(n,t,i){var e=n.AdjustmentAmtUSD,r=getNumberValue(t,RuleConfiguration.FeatureConfigurationMultiCurrencyDisplay&&GridDisplay=="Local"?n.CultureCode:preferredCulture),u,s,f,o;if(r!=null){if(r=roundingRule(r,"general","annual"),isNaN(r))return showAlert("Please enter the data valid format"),n.AdjustmentAmtUSD=e,!1;if(u=n.EmployeeStatus.toLowerCase()=="annual"?r/n.CurrentAnnualSalaryLocalForCalc*100==Infinity?0:r/n.CurrentAnnualSalaryLocalForCalc*100:r/n.CurrentHourlyRateLocalForCalc*100==Infinity?0:r/n.CurrentHourlyRateLocalForCalc*100,r=u==0?0:r,u>999)return showAlert("Given increase exceeds the maximum limit"),n.AdjustmentAmtUSD=e,!1;s=r;f=r/n.MeritExchangeRate;n.AdjustmentPct=roundingRule(u,"promotion","percentage");n.AdjustmentAmtLocal=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(f,"adjustment","annual"):roundingRule(f,"adjustment","hourly");n.AdjustmentAmtUSD=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(n.AdjustmentAmtLocal*n.MeritExchangeRate,"general","annual"):roundingRule(n.AdjustmentAmtLocal*n.MeritExchangeRate,"general","hourly")}else n.AdjustmentPct=null,n.AdjustmentAmtLocal=null,n.AdjustmentAmtUSD=null,n.HrlyAdjustmentAmtLocal=null,n.HrlyAdjustmentAmtUSD=null;CalculateNewSalary(n);CalculateTCC(n);o=i.index();checkAdjustmentGuideLine(n,o);n.IsAdjustmentEdited=!0;n.dirty=!0;objChangeFlag=!0}function calculateBudgetIsExceed(n){var t=RuleConfiguration.ProrationRuleProrate?n.ProRation:1,i=MeritAmtUSD!=null?MeritAmtUSD:0,r=n.CurrentAnnualSalaryUSDForCalc*n.MeritPCT*t/100,u=r-i,f=document.getElementById("hdnPromotionSpent").value,e=document.getElementById("hdnMeritSpent").value,o=document.getElementById("hdnLumpSumSpent").value,s=document.getElementById("hdnMeritBudget").value,h=eval(e)+eval(u),c=eval(h)+eval(f)+eval(o),l=eval(s)-eval(c);return l>=0?!0:!1}function showMeritAlert(n,t){swal({title:n,html:t,allowOutsideClick:!1,width:350})}function meritOverrideRule(n,t,i){var r=CheckGuideLineExceed(n.MeritRange,n.MeritPCT);return RuleConfiguration.MeritOverrideHardStop?RuleConfiguration.MeritOverrideIncreaseWithinGuideline?r?(showMeritAlert("Merit Pay outside guideline","The merit increase should be entered within the specified guideline."),!1):(calculateMeritAmt(n,t,i),!0):calculateBudgetIsExceed(n)==!0?(calculateMeritAmt(n,t,i),!0):(showMeritAlert("Salary Increase exceeds your budget","The given increase(s) cannot exceed the allocated budget. Update the increase(s) and save your work."),!1):RuleConfiguration.MeritOverrideSoftStop?RuleConfiguration.MeritOverrideMandatoryJustification&&r?(OpenMeritMandateCommentPopUp(n,t,i),!0):(calculateMeritAmt(n,t,i),!0):void 0}function onCollapsableClick(){var n=$("#ddlLocalCurrencies").data("kendoDropDownList").dataItem($("#ddlLocalCurrencies").data("kendoDropDownList").select()),c,y;if(n!=undefined){var i=document.getElementById("hdnPromotionSpent").value,r=document.getElementById("hdnMeritSpent").value,u=document.getElementById("hdnLumpSumSpent").value,f=document.getElementById("hdnMeritBudget").value,e=document.getElementById("hdnBonusSpent").value,o=document.getElementById("hdnBonusBudget").value,l=f!=0?roundBudget(f/n.ExchangeRate):0,a=o!=0?roundBudget(o/n.ExchangeRate):0,s=r!=0?roundBudget(r/n.ExchangeRate):0,t=u!=0?roundBudget(u/n.ExchangeRate):0,h=i!=0?roundBudget(i/n.ExchangeRate):0,v=e!=0?roundBudget(e/n.ExchangeRate):0;t=RuleConfiguration.MeritValuesReCalculate==!1&&RuleConfiguration.LumpSumRuleLumpSumType=="AutoCalc"?0:t;c=eval(l)-(eval(s)+eval(t)+eval(h));y=eval(a)-eval(v);createChart(eval(c),eval(s),eval(t),eval(h),ddlCurrencyCulture)}}function rebindOfTotalSpentSummary(){var t=document.getElementById("hdnPromotionSpent").value,i=document.getElementById("hdnMeritSpent").value,r=document.getElementById("hdnLumpSumSpent").value,u=document.getElementById("hdnAdjustmentSpent").value,n=$("#ddlLocalCurrencies").data("kendoDropDownList").dataItem($("#ddlLocalCurrencies").data("kendoDropDownList").select()),f=n!=undefined?n.CultureCode:preferredCulture,e=i!=0?roundBudget(i/n.ExchangeRate):0,o=r!=0?roundBudget(r/n.ExchangeRate):0,s=t!=0?roundBudget(t/n.ExchangeRate):0,c=hdnBonusSpent!=0?roundBudget(hdnBonusSpent/n.ExchangeRate):0,l=u!=0?roundBudget(u/n.ExchangeRate):0,h=roundToWholeNumber(eval(e))+roundToWholeNumber(eval(o))+roundToWholeNumber(eval(s));$("#totalSpentAmt").text(formatBudgetCurrency(eval(h),"c0",f));$("#balanceAmt").text($("#meritBalance").text())}function onMultiCurrencyDropDownChange(){BindBudgetData()}function calculateForMeritPct(n,t,i,r){var u=getNumberValue(t,preferredCulture);return u!=null?(u=t.indexOf("%")>-1?u*100:u,u=roundingRule(u,"merit","percentage"),MeritPCT=n.MeritPCT,isNaN(u)&&(u=0),u>999)?(showAlert("Merit % exceeds the maximum limit"),!1):(changeType="pct",n.MeritPCT=u,!meritOverrideRule(n,i,r))?!1:!0:(changeType="pct",n.MeritPCT=u,!meritOverrideRule(n,i,r))?!1:!0}function CalculateMeritAmtLocal(n,t,i,r){var e=RuleConfiguration.ProrationRuleProrate?n.ProRation:1,u=getNumberValue(t,RuleConfiguration.FeatureConfigurationMultiCurrencyDisplay&&GridDisplay=="Local"?n.CultureCode:preferredCulture),o,s,f;return u!=null?(o=u,u=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(o,"merit","annual"):roundingRule(o,"merit","hourly"),s=u*n.MeritExchangeRate,isNaN(u)?(showAlert("Please enter the data valid format"),!1):(f=n.EmployeeStatus.toLowerCase()=="annual"?u/(n.CurrentAnnualSalaryLocalForCalc*e)*100==Infinity?0:u/(n.CurrentAnnualSalaryLocalForCalc*e)*100:u/(n.CurrentHourlyRateLocalForCalc*e)*100==Infinity?0:u/(n.CurrentHourlyRateLocalForCalc*e)*100,u=f==0?0:u,f>999)?(showAlert("Given increase exceeds the maximum limit"),!1):(changeType="local",n.MeritPCT=f,n.MeritAmtLocal=f!=0?u:0,n.MeritAmtUSD=f!=0?s:0,!meritOverrideRule(n,i,r))?!1:!0):(changeType="local",n.MeritPCT=null,n.MeritAmtLocal=null,n.MeritAmtUSD=null,!meritOverrideRule(n,i,r))?!1:!0}function CalculateMeritAmtUSD(n,t,i,r){var e=RuleConfiguration.ProrationRuleProrate?n.ProRation:1,u=getNumberValue(t,RuleConfiguration.FeatureConfigurationMultiCurrencyDisplay&&GridDisplay=="Local"?n.CultureCode:preferredCulture),o,s,f;return u!=null?(o=u,u=roundingRule(o,"general","annual"),s=u/n.MeritExchangeRate,isNaN(u)?(showAlert("Please enter the data valid format"),!1):(f=u/(n.CurrentAnnualSalaryUSDForCalc*e)*100==Infinity?0:u/(n.CurrentAnnualSalaryUSDForCalc*e)*100,f>999)?(showAlert("Given increase exceeds the maximum limit"),!1):(changeType="usd",n.MeritPCT=f,n.MeritAmtLocal=f!=0?s:0,n.MeritAmtUSD=f!=0?u:0,!meritOverrideRule(n,i,r))?!1:!0):(changeType="usd",n.MeritPCT=null,n.MeritAmtLocal=null,n.MeritAmtUSD=null,!meritOverrideRule(n,i,r))?!1:!0}function calculateMeritAmt(n,t,i){var o=$("#ReporteeGrid").data("kendoGrid"),u=$("#ddlLocalCurrencies").data("kendoDropDownList").dataItem($("#ddlLocalCurrencies").data("kendoDropDownList").select()),e,r,f,s;n==t&&(n=o._data[t]);LumpSumAmtUSD=n.LumpSumAmtUSD;n.MeritPCT!=null?(e=RuleConfiguration.ProrationRuleProrate?n.ProRation:1,changeType=="pct"?n.EmployeeStatus.toLowerCase()=="annual"?GridDisplay=="USD"?(r=n.CurrentAnnualSalaryUSDForCalc*n.MeritPCT*e/100,f=r/n.MeritExchangeRate):(f=n.CurrentAnnualSalaryLocalForCalc*n.MeritPCT*e/100,r=f/n.MeritExchangeRate*u.ExchangeRate):GridDisplay=="USD"?(r=n.CurrentHourlyRateUSDForCalc*n.MeritPCT*e/100,f=r/n.MeritExchangeRate):(f=n.CurrentHourlyRateLocalForCalc*n.MeritPCT*e/100,r=f/n.MeritExchangeRate*u.ExchangeRate):(r=n.MeritAmtUSD,f=n.MeritAmtLocal),n.MeritPCT=roundingRule(n.MeritPCT,"merit","percentage"),n.MeritAmtLocal=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(f,"merit","annual"):roundingRule(f,"merit","hourly"),r=n.MeritAmtLocal/n.MeritExchangeRate*u.ExchangeRate,n.MeritAmtUSD=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(r,"general","annual"):roundingRule(r,"general","hourly")):(n.MeritPCT=null,n.MeritAmtLocal=null,n.MeritAmtUSD=null,n.HrlyMeritAmtLocal=null,n.HrlyMeritAmtUSD=null,HideSubmitApproveCheckBoxes(n));n.IsMeritEdited=!0;n.dirty=!0;objChangeFlag=!0;lumpSumRule(n,"merit");CalculateNewSalary(n);CalculateTCC(n);n.EmployeeStatus.toLowerCase()=="annual"?fn_BudgetMeritSpentChanges(MeritAmtLocal!=null?MeritAmtLocal/n.MeritExchangeRate*u.ExchangeRate:0,n.MeritAmtLocal!=null?n.MeritAmtLocal/n.MeritExchangeRate*u.ExchangeRate:0,LumpSumAmtUSD!=null?LumpSumAmtUSD:0,n.LumpSumAmtUSD!=null?n.LumpSumAmtUSD:0):fn_BudgetMeritSpentChanges(MeritAmtLocal!=null?n.TotalWorkHrs!=null?MeritAmtLocal*n.TotalWorkHrs/n.MeritExchangeRate*u.ExchangeRate:MeritAmtLocal*2080/n.MeritExchangeRate*u.ExchangeRate:0,n.MeritAmtLocal!=null?n.TotalWorkHrs!=null?n.MeritAmtLocal*n.TotalWorkHrs/n.MeritExchangeRate*u.ExchangeRate:n.MeritAmtLocal*2080/n.MeritExchangeRate*u.ExchangeRate:0,LumpSumAmtUSD!=null?n.TotalWorkHrs!=null?LumpSumAmtUSD:LumpSumAmtUSD:0,n.LumpSumAmtUSD!=null?n.TotalWorkHrs!=null?n.LumpSumAmtUSD:n.LumpSumAmtUSD:0);s=i.index();checkMeritGuideLine(n,s);refreshRow(o,i)}function checkCompGuideLines(n,t){checkMeritGuideLine(n,t);checkAdjustmentGuideLine(n,t);checkPromotionGuideLine(n,t);checkLumpSumGuideLine(n,t)}function checkMeritGuideLine(n,t){CheckGuideLineExceed(n.MeritRange,n.MeritPCT)?setColor(t,GridDisplay=="USD"?"usd":"local",n.IsMeritEligible?"Red":""):setColor(t,GridDisplay=="USD"?"usd":"local","")}function checkAdjustmentGuideLine(n,t){CheckGuideLineExceed(n.MeritRange,n.AdjustmentPct)?setColor(t,GridDisplay=="USD"?"AdjustmentUSD":"AdjustmentLocal","Red"):setColor(t,GridDisplay=="USD"?"AdjustmentUSD":"AdjustmentLocal","")}function checkBonusGuideLine(n,t){CheckGuideLineExceed(n.MeritRange,n.BonusPct)?setColor(t,"BonusAmt","Red"):setColor(t,"BonusAmt","")}function checkPromotionGuideLine(n,t){CheckGuideLineExceed(n.MeritRange,n.PromotionPct)?setColor(t,GridDisplay=="USD"?"promotionUSD":"promotionLocal",n.IsPromotionEligible?"Red":""):setColor(t,GridDisplay=="USD"?"promotionUSD":"promotionLocal","")}function checkLumpSumGuideLine(n,t){CheckGuideLineExceed(n.MeritRange,n.LumpSumPct)?setColor(t,GridDisplay=="USD"?"LumpSumUSD":"LumpSumLocal",n.IsMeritEligible?"Red":""):setColor(t,GridDisplay=="USD"?"LumpSumUSD":"LumpSumLocal","")}function rollbackMeritPct(n,t,i){var r=$("#ReporteeGrid").data("kendoGrid");n==t&&(n=r._data[t]);n.MeritPCT=MeritPCT;n.MeritAmtLocal=MeritAmtLocal;n.MeritAmtUSD=MeritAmtUSD;refreshRow(r,i)}function fn_BudgetMeritSpentChanges(n,t,i,r){var p=$("#ddlLocalCurrencies").data("kendoDropDownList").dataItem($("#ddlLocalCurrencies").data("kendoDropDownList").select()),a=p!=undefined?p.CultureCode:preferredCulture,d=t-n,g=r-i,o=document.getElementById("hdnPromotionSpent").value,et=document.getElementById("hdnAdjustmentSpent").value,s=document.getElementById("hdnMeritSpent"),w=document.getElementById("hdnLumpSumSpent"),c=document.getElementById("hdnMeritBudget").value,nt=s.value,tt=w.value,it=document.getElementById("meritSpentAmt"),b=document.getElementById("lumpsumSpentAmt"),ot=document.getElementById("totalMeritSpentAmt"),st=document.getElementById("totalLumpsumSpentAmt"),rt=document.getElementById("meritBalance"),e=eval(nt)+eval(d),u=eval(tt)+eval(g),v,f,y,l,h;s.value=e;w.value=u;newMeritSpentAmt1=eval(e)!=0?roundBudget(eval(e)):0;e=newMeritSpentAmt1!=NaN?e:0;hdnMeritSpent1=eval(s)!=0?roundBudget(eval(s)):0;s=hdnMeritSpent1!=NaN?s:0;hdnPromotionSpent1=eval(o)!=0?roundBudget(eval(o)):0;o=hdnPromotionSpent1!=NaN?o:0;newLumpsumSpentAmt1=eval(u)!=0?roundBudget(eval(u)):0;u=newLumpsumSpentAmt1!=NaN?u:0;c=eval(c)!=0?roundBudget(eval(c)):0;it.innerHTML=formatBudgetCurrency(eval(e),"c0",a);b!=null&&(b.innerHTML=formatBudgetCurrency(eval(u),"c0",a));u=u;v=eval(e)+eval(o)+eval(u);f=eval(c)-eval(v);rt.innerHTML=formatBudgetCurrency(eval(f),"c0",a);y="(";f=Math.round(f);f<0?($("#meritBalance").removeClass("counter2"),$("#meritBalance").addClass("counter3"),$("#balancePct").removeClass("counter2"),$("#balancePct").addClass("counter3")):($("#meritBalance").removeClass("counter3"),$("#meritBalance").addClass("counter2"),$("#balancePct").addClass("counter2"),$("#balancePct").removeClass("counter3"));v=roundToWholeNumber(eval(e))+roundToWholeNumber(eval(o))+roundToWholeNumber(eval(u));var ut=document.getElementById("balanceDonughtClass").className,k=(eval(Math.abs(f))/eval(totalCurrentSalary)*100).toFixed(0),y=(eval(Math.abs(f))/eval(totalCurrentSalary)*100).toFixed(0),ft=Math.round(y/BudgetPercentage*100);f>0?$("#balancePct").text(k.toString()+"%"):$("#balancePct").text("("+k+"%)");BudgetPercentage==y?h="c100 small p100":(l=f>0?1:f==0?0:-1,l==1?h="c100 small p"+ft:l==0?h="c100 small p100":l==-1&&(h="c100 small x100 p100"));$("#balanceDonughtClass").removeClass(ut);$("#balanceDonughtClass").addClass(h)}function roundToWholeNumber(n){return Number(Math.round(n))}function roundBudget(n){return Number(Math.round(n+"e2")+"e-2")}function lumpSumRule(n){var f,h,y,r,t;if(RuleConfiguration.LumpSumRuleLumpSumType==meritPageConstants.LumpSumTypeAutoCalc){var c=RuleConfiguration.ProrationRuleProrate?n.ProRation:1,p=n.MeritAmtLocal!=null?n.MeritAmtLocal:0,w=n.PromotionAmtLocal!=null?n.PromotionAmtLocal:0,b=n.AdjustmentAmtLocal!=null?n.AdjustmentAmtLocal:0,u=n.EmployeeStatus.toLowerCase()=="hourly"?n.CurrentHourlyRateLocalForCalc:n.CurrentAnnualSalaryLocalForCalc!=null?n.CurrentAnnualSalaryLocalForCalc:0,e=u+p+w+b,l=n.EmployeeStatus.toLowerCase()=="annual"?e:e*(n.TotalWorkHrs!=null?n.TotalWorkHrs:2080),a=n.EmployeeStatus.toLowerCase()=="annual"?e/(n.TotalWorkHrs!=null?n.TotalWorkHrs:2080):e;n.NewSalaryLocal=roundingRule(l,"newsalary","annual");n.NewHourlyRateLocal=roundingRule(a,"newsalary","hourly");var o=RuleConfiguration.LumpSumRuleRangeMaxPct,s=RuleConfiguration.LumpSumRuleRangeMaxAmt,i=o!=0?u>o*n.MktMaxLocal/100?u:o*n.MktMaxLocal/100:s+n.MktMaxLocal>u?s+n.MktMaxLocal:u,v=n.EmployeeStatus.toLowerCase()=="annual"?l:a;v>i?(RuleConfiguration.MeritValuesReCalculate||(i=o==0?s+n.MktMaxLocal>n.CurrentAnnualSalaryLocalForCalc?n.MktMaxLocal:n.CurrentAnnualSalaryLocalForCalc:i,i=n.CurrentAnnualSalaryLocalForCalc>n.MktMaxLocal?n.CurrentAnnualSalaryLocalForCalc:i),f=v-i,h=n.EmployeeStatus.toLowerCase()=="annual"?f:f*(n.TotalWorkHrs!=null?n.TotalWorkHrs:2080),n.LumpSumAmtLocal=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(h,"lumpsum","annual"):roundingRule(h,"lumpsum","hourly"),n.LumpSumAmtUSD=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(n.LumpSumAmtLocal*n.MeritExchangeRate,"general","annual"):roundingRule(n.LumpSumAmtLocal*n.MeritExchangeRate,"general","hourly"),y=n.LumpSumAmtLocal*100/n.CurrentAnnualSalaryLocalForCalc,n.LumpSumPct=roundingRule(y,"lumpsum","percentage"),RuleConfiguration.MeritValuesReCalculate&&(n.EmployeeStatus=="annual"?(r=(n.MeritAmtLocal!=null?n.MeritAmtLocal:0)-f,t=r*100/(n.CurrentAnnualSalaryLocalForCalc*c),t=roundingRule(t,"merit","percentage")):(r=(n.MeritAmtLocal!=null?n.MeritAmtLocal:0)-f,t=r*100/(n.CurrentHourlyRateLocalForCalc*c),t=roundingRule(t,"merit","percentage")),n.MeritPCT=t,n.MeritAmtLocal=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(r,"merit","annual"):roundingRule(r,"merit","hourly"),n.MeritAmtUSD=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(n.MeritAmtLocal*n.MeritExchangeRate,"general","annual"):roundingRule(n.MeritAmtLocal*n.MeritExchangeRate,"general","hourly"))):(n.LumpSumAmtUSD=0,n.LumpSumAmtLocal=0,n.LumpSumPct=0)}}function CalculateNewSalary(n){var i=0,r=0,u=0,t=0,f,s,e,h,o;n.EmployeeStatus.toLowerCase()=="annual"?(i=n.MeritAmtLocal!=null?n.MeritAmtLocal:0,r=n.PromotionAmtLocal!=null?n.PromotionAmtLocal:0,u=n.AdjustmentAmtLocal!=null?n.AdjustmentAmtLocal:0):(i=n.MeritAmtLocal!=null?n.TotalWorkHrs!=null?n.MeritAmtLocal*n.TotalWorkHrs:n.MeritAmtLocal*2080:0,r=n.PromotionAmtLocal!=null?n.TotalWorkHrs!=null?n.PromotionAmtLocal*n.TotalWorkHrs:n.PromotionAmtLocal*2080:0,u=n.AdjustmentAmtLocal!=null?n.TotalWorkHrs!=null?n.AdjustmentAmtLocal*n.TotalWorkHrs:n.AdjustmentAmtLocal*2080:0);t=n.EmployeeStatus.toLowerCase()=="annual"?(n.CurrentAnnualSalaryLocalForNewSalaryCalc!=null?n.CurrentAnnualSalaryLocalForNewSalaryCalc:0)+i+r+u:(n.CurrentAnnualSalaryLocalForNewSalaryCalc!=null?n.CurrentAnnualSalaryLocalForNewSalaryCalc:0)+i+r+u;f=n.LumpSumAmtLocal!=null?n.LumpSumAmtLocal:0;s=t;t<n.CurrentAnnualSalaryLocalForCalc&&n.CurrentAnnualSalaryLocalForCalc>n.MktMaxLocal&&(t=n.CurrentAnnualSalaryLocalForCalc,f=i);e=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(t,"newsalary","annual"):roundingRule(t,"newsalary","hourly");h=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(n.NewSalaryLocal*n.MeritExchangeRate,"general","annual"):roundingRule(n.NewSalaryLocal*n.MeritExchangeRate,"general","hourly");e<=n.CurrentAnnualSalaryLocalForCalc?(n.NewSalaryLocal=t,n.NewHourlyRateLocal=n.NewSalaryLocal/(n.TotalWorkHrs!=null?n.TotalWorkHrs:2080),n.NewHourlyRateLocal=roundingRule(n.NewHourlyRateLocal,"newsalary","hourly")):(n.NewSalaryLocal=e,n.NewHourlyRateLocal=n.NewSalaryLocal/(n.TotalWorkHrs!=null?n.TotalWorkHrs:2080),n.NewHourlyRateLocal=roundingRule(n.NewHourlyRateLocal,"newsalary","hourly"));n.NewSalaryUSD=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(n.NewSalaryLocal*n.MeritExchangeRate,"general","annual"):roundingRule(n.NewSalaryLocal*n.MeritExchangeRate,"general","hourly");n.NewHourlyRateUSD=n.NewSalaryUSD/(n.TotalWorkHrs!=null?n.TotalWorkHrs:2080);o=0;o=n.EmployeeStatus.toLowerCase()=="annual"?n.MktMidLocal==null||n.MktMidLocal==0?0:n.NewSalaryLocal/n.MktMidLocal*100:n.MktMidLocal==null||n.MktMidLocal==0?0:n.NewHourlyRateLocal/n.MktMidLocal*100;n.NewCompaRatio=roundingRule(o,"","comparatio");RuleConfiguration.MeritValuesReCalculate==!1&&(n.LumpSumAmtLocal=f);n.LumpSumPct==null&&(n.LumpSumAmtLocal=null,n.LumpSumAmtUSD=null)}function CalculateTCC(n){var t=n.LumpSumAmtLocal!=null?n.LumpSumAmtLocal:0,i=n.LumpSumAmtUSD!=null?n.LumpSumAmtUSD:0,o=n.AdjustedBonusAMTLocal!=null?n.AdjustedBonusAMTLocal:0,s=n.Payout!=null?n.Payout:0,h=n.AdjustedBonusAmtUSD!=null?n.AdjustedBonusAmtUSD:0,r=n.NewSalaryLocal!=null?n.NewSalaryLocal:0,t=n.LumpSumAmtLocal!=null?n.LumpSumAmtLocal:0,u=n.NewSalaryUSD!=null?n.NewSalaryUSD:0,f=r+t,e=u+i;n.TCCLocal=roundingRule(f,"tccgeneral","annual");n.TCCUSD=roundingRule(e,"tccgeneral","annual")}function BindCompTreeView(){var n=$('input[name="__RequestVerificationToken"]').val();$.ajax({url:"../Compensation/GetCompManagerTreeData",type:"POST",data:{__RequestVerificationToken:n,managerNum:$("#hndSelectedManagerNum").val(),pageType:$("#hndPageType").val()},cache:!1,success:function(n){var f=getTreeViewHierarchialDataSource(n,"ManagerNum","ReportingManagerNum","IsTreeTop","RowNumber"),t=$("#ddlCompManagerTreeView").kendoExtDropDownTreeView({treeview:{template:"#=ShowStatusCompManagerTree(item)#",dataTextField:"ManagerName",dataValueField:"ManagerNum",loadOnDemand:!1,dataSource:f,select:ddlCompManagerTreeOnSelect}}).data("kendoExtDropDownTreeView"),e=$("#hndSelectedManagerNum").val(),o=$("#hndManagerLineage").val(),s=$("#hndMenuType").val(),u=$("#hndRowNumber").val(),i,r;t!=undefined&&(t._treeview.expand(".k-item"),(u==undefined||u==null||u=="")&&(isMyApproval=="True"?getManagerName():(i="",r="",t._treeview.dataSource._data.length>0&&(t._treeview.dataSource._data[0].ManagerName=="My Organization"?t._treeview.dataSource._data.length==1?(i=t._treeview.dataSource._data[0].ManagerName+" ("+t._treeview.dataSource._data[0].CompCompletedCount+"/"+t._treeview.dataSource._data[0].ReporteeCount+")",r=t._treeview.findByUid(t._treeview.dataSource._data[0].uid),$("#hndSelectedManagerNum").val(t._treeview.dataSource._data[0].ManagerNum),$("#hndMenuType").val(t._treeview.dataSource._data[0].MenuType)):(i=t._treeview.dataSource._data[1].ManagerName+" ("+t._treeview.dataSource._data[1].CompCompletedCount+"/"+t._treeview.dataSource._data[1].ReporteeCount+")",r=t._treeview.findByUid(t._treeview.dataSource._data[1].uid),$("#hndSelectedManagerNum").val(t._treeview.dataSource._data[1].ManagerNum),$("#hndMenuType").val(t._treeview.dataSource._data[1].MenuType)):(i=t._treeview.dataSource._data[0].ManagerName+" ("+t._treeview.dataSource._data[0].CompCompletedCount+"/"+t._treeview.dataSource._data[0].ReporteeCount+")",r=t._treeview.findByUid(t._treeview.dataSource._data[0].uid),$("#hndSelectedManagerNum").val(t._treeview.dataSource._data[0].ManagerNum),$("#hndMenuType").val(t._treeview.dataSource._data[0].MenuType),refreshGrid())),setCompTreeViewDrodDownText(i),t._treeview.select(r),t._treeview.dataSource._data.length!=0&&$("#SelectedManagerName").text(t._treeview.dataSource._data[1].ManagerName))))}});DefaultCurrencyNum!="0"&&BindBudgetData()}function setCompTreeViewDrodDownText(n){$("#ddlCompManagerTreeView").find(".k-input").text(n)}function ddlCompManagerTreeOnSelect(n){if(!showSaveWarning(n,"objChangeFlag"))return n._defaultPrevented=!0,!1;var t=n.sender.dataItem(n.node);$("#ManagerTreesearch").val("");CallManagerAction(t);$("#clearfilter").is(":visible")&&$("#clearfilter").trigger("click");$("#ddlCompManagerTreeView span.k-in").find("span.highlight").removeClass("highlight")}function CallManagerAction(n){var t;n.ManagerName=="My Organization"?($("#hndIsRollup").val(1),t=n.LoggedInEmployeeNum,$("#hndLoggedInEmployeeNum").val(n.LoggedInEmployeeNum),myOrgNode=n.ManagerName,meritPageConstants.Multicurrency=="False"?$("#inDirectBudgetSection").hide():$("#budgetCheckBox").hide()):(t=n.ManagerNum,$("#hndIsRollup").val(0),meritPageConstants.Multicurrency=="False"?$("#inDirectBudgetSection").show():$("#budgetCheckBox").show());$("#hndSelectedManagerNum").val(t);$("#hndManagerLineage").val(n.ManagerLineage);$("#hndMenuType").val(n.MenuType);$("#hndRowNumber").val(n.RowNumber);getApprovalStatus();refreshGridTreeChange();$("#SelectedManagerName").text(n.ManagerName);$("#sidebar-wrapper").toggleClass("active")}function ShowStatusCompManagerTree(n,t){var i="",r;return n.OverFlow&&(i=" class='OverFlow'"),r="",n.IsOverSpent==!0?"<span style='color:red' id="+n.ManagerNum+"_"+n.ManagerNum+i+">"+managerTreeViewHighLightText(n.ManagerName,t)+" (<span id="+n.ManagerNum+">"+n.CompCompletedCount+"<\/span>/"+n.ReporteeCount+")<\/span> ":"<span id="+n.ManagerNum+"_"+n.ManagerNum+i+">"+managerTreeViewHighLightText(n.ManagerName,t)+" (<span id="+n.ManagerNum+">"+n.CompCompletedCount+"<\/span>/"+n.ReporteeCount+")<\/span> "}function managerTreeViewHighLightText(n,t){var r,i;if(t==undefined||t==null||t==""||(r=t.length,i=n.toUpperCase().indexOf(t.toUpperCase()),i<0))return n;var u="",f="",e='<span class="highlight">'+n.substr(i,r)+"<\/span>";return i>0&&(u=n.substr(0,i)),i+r<n.length&&(f=n.substring(i+r)),u+e+f}function meritTreeflag(n,t){document.getElementById("imgApproval_"+n).style.color=t==1?"#FE6D00":t==2?"#29D800":t==3?"#FF0000":t==4?"#FBCA00":"transparent"}function getMeritTreeViewStatusImage(n){var i=n.ManagerLevelAppStatus,r=n.ManagerNum,t="";return i==1?t="<span id='imgApproval_"+r+"' class='glyphicon glyphicon-one-fine-dot' style='color:#FE6D00'/>":i==2?t="<span id='imgApproval_"+r+"' class='glyphicon glyphicon-one-fine-dot' style='color:#29D800'/>":i==3?t="<span id='imgApproval_"+r+"' class='glyphicon glyphicon-one-fine-dot' style='color:#FF0000'/>":i==4?t="<span id='imgApproval_"+r+"' class='glyphicon glyphicon-one-fine-dot' style='color:#FBCA00'/>":i==0&&(t="<span id='imgApproval_"+r+"' class='glyphicon glyphicon-one-fine-dot' style='color:transparent'/>"),finalImg=t!=""==!0?""+t+"":""}function getCompCompletedCount(){var i=$("#hndMenuType").val(),n=$("#hndSelectedManagerNum").val(),t;i==1&&$("#hndIsRollup").val()!=1&&(t=$('input[name="__RequestVerificationToken"]').val(),$.ajax({url:"../Compensation/GetCompCompletedCount",type:"Post",data:{__RequestVerificationToken:t,selectedManagerNum:n},success:function(t){$("#"+n)[0].innerText=t[0];var i=$("#"+n+"_"+n)[0].innerText;$("#"+n+"_"+n)[0].style.color=t[1]==1?"red":"#6e6259 ";setCompTreeViewDrodDownText(i)}}))}function getManagerName(){var n=$('input[name="__RequestVerificationToken"]').val();$.ajax({url:"../Compensation/GetManagerName",type:"post",cache:!1,data:{__RequestVerificationToken:n,selectedManagerNum:$("#hndSelectedManagerNum").val()},success:function(n){setCompTreeViewDrodDownText(n);isMyApproval="False"}})}function ChangeMeritPerfRating(n,t,i,r){var f,h=$("#ReporteeGrid").data("kendoGrid"),l="#ddlMeritPerfRating_"+n.Empjobnum,u=$("#ddlMeritPerfRating_"+n.Empjobnum).data("kendoDropDownList").dataItem($("#ddlMeritPerfRating_"+n.Empjobnum).data("kendoDropDownList").select()),c=n.RatingAndGuideline,o,e,s;if(c!=null){for(o=c.split("|"),e=0;e<o.length;e++)if(s=o[e].split("_"),s[0]==u.Value){f=s[1];break}if(f==undefined)return n.MeritRange=null,n.MeritPerformanceRating=u.Text,n.MeritPerformanceRatingNum=u.Value,!1;f.length>0&&(n.MeritRange=f,n.MeritPerformanceRating=u.Text,n.MeritPerformanceRatingNum=u.Value,checkCompGuideLines(n,i))}else return n.MeritPerformanceRating=null,n.MeritPerformanceRating=u.Text,n.MeritPerformanceRatingNum=u.Value,n.MeritRange=r,n.MeritIncreaseGuideline=r,n.dirty=!0,n.IsMeritEdited=!0,refreshRow(h,t),objChangeFlag=!0,!1;return n.dirty=!0,n.IsMeritEdited=!0,refreshRow(h,t),objChangeFlag=!0,!0}function CallEmployeeNameClick(n,t){var n=n,t=t,i=$('input[name="__RequestVerificationToken"]').val();$.ajax({url:"../Compensation/_EmployeeInfo",cache:!1,type:"POST",data:{__RequestVerificationToken:i,employeeNum:n},success:function(n){$("#divEmployeeInfo").html(n);$("#divEmployeeInfo").modal("show");$("#divInfoTitle").text(t);$("#divInfoTitle1").text("History of "+t)}})}function CallGradeClick(n,t,i){var u=n.IsPromotionEligible==!0&&n.IsLocked==!1&&n.CurrentAnnualSalaryLocalForCalc>0?!1:!0,f=n.NewTitle!=null?n.NewTitle:"",e=n.Empjobnum,r;$("#CommentPopup").data("kendoWindow").options.readOnly=u;$("#CommentPopup").data("kendoWindow").options.rowData=n;$("#CommentPopup").data("kendoWindow").options.row=t;$("#CommentPopup").data("kendoWindow").options.index=i;r=$('input[name="__RequestVerificationToken"]').val();$.ajax({url:"../Compensation/_Promotion",cache:!1,type:"Post",data:{__RequestVerificationToken:r,newGradeTitle:f,empJobNum:e},success:function(t){$("#divPromotion").html(t);$("#divPromotion").modal("show");$("#divPromotion #divPromotionTitle").text("Enter promotion comment for "+n.EmployeeName);$("#promotionComment").attr("placeholder","Write a review comments for "+n.EmployeeName)}})}function CallCommentClick(n,t){var r=ReporteesPageConstatns.compensationCommentType,i;$("#CommentPopup").data("kendoWindow").options.rowData=n;$("#CommentPopup").data("kendoWindow").options.row=t;$("#CommentPopup").data("kendoWindow").options.readOnly=n.CurrentAnnualSalaryLocalForCalc>0?!1:!0;i=$('input[name="__RequestVerificationToken"]').val();$.ajax({url:"../Comment/_Comment",cache:!1,type:"Post",data:{__RequestVerificationToken:i,empJobNum:n.Empjobnum,commentType:r},success:function(t){isPopupEdited=!1;$("#divComment").html(t);$("#divComment").modal("show");$("#divComment #myCmtModalLabel").text(n.EmployeeName);$("#comment").attr("placeholder","Write a review comments for "+n.EmployeeName);setTimeout(function(){updateScrollDown("generalComments")},300)}})}function updateScrollDown(n){var t=document.getElementById(n);t.scrollTop=t.scrollHeight}function refreshGrid(){var n=$("#ReporteeGrid").data("kendoGrid");n.dataSource.read();BindBudgetData()}function refreshGridTreeChange(){var n,t;getApprovalStatus();n=$("#ReporteeGrid").data("kendoGrid");n.dataSource._data=[];t=n.dataSource._pageSize;n.dataSource.query({page:pageno,pageSize:t,filter:[],sort:[]});BindBudgetData()}function grdMeritReportees_sync(){refreshGrid();getCompCompletedCount()}function CheckGuideLineExceed(n,t){var r,i,u;return(t=parseFloat(t==null?0:t),t!=NaN&&t!=""&&n!=null&&(u=n.split("-"),u.length==2?(r=n.split("-")[0].replace("%",""),i=n.split("-")[1].replace("%","")):u.length==1?(r=0,i=n.replace("%","")):(r=n.replace("%",""),i=n.replace("%","")),i=eval(i),eval(t)<eval(r)||eval(t)>eval(i)))?!0:!1}function setColor(n,t,i){var u=$("#ReporteeGrid .k-grid-content").find("tr"),r=$(u[n]).find("[id$="+t+"]")[0];r!=null&&r!=undefined&&(r.style.color=i)}function setDisable(n,t,i){var u=$("#ReporteeGrid .k-grid-content").find("tr"),r=$(u[n]).find("[id$="+t+"]")[0];r!=null&&r!=undefined&&(r.disabled=i)}function calculateHourly(n){return RuleConfiguration.HourlyRate==0||isNaN(eval(n))||eval(n)==undefined||eval(n)==0?0:eval(n)/eval(RuleConfiguration.HourlyRate)}function applyKendoControlStyles(){$(".gridControl").each(function(){eval($(this).children("script").last().html())})}function ShowOutlierComments(n,t,i,r){onCommentPopupClose==0&&OpenCommentPopUp(n,t,i,n.Empjobnum,r)}function enableDisableControls(n){$("#ReporteeGrid input").attr("disabled",n)}function refreshRow(n,t){for(var w,t,c,b,k,v,e,h,o=n.dataItem(t),d=$(t).children('td[role="gridcell"]'),l=0,p=[],i=0;i<n.columns.length;i++)if(n.columns.length>i+l){w=n.columns[i];w.locked==!0&&(l=l+1,p.push(w));var r=n.columns[i+l],a=r.template,u=d.eq(i);if(a!==undefined)v=kendo.template(a),u.html(v(o));else{var s=o[r.field],y=r.format,f=r.values;if(f!==undefined&&f!=null){for(e=0;e<f.length;e++)if(h=f[e],h.value==s){u.html(h.text);break}}else y!==undefined?u.html(kendo.format(y,s)):u.html(s)}}if(t=t[0],t!=undefined&&(c=t.rowIndex,c!=undefined&&c!=null)){for(b=n._cellId.replace("_active_cell",""),k=$($("#"+b+" .k-grid-content-locked").find("tr")[c]).children('td[role="gridcell"]'),i=0;i<p.length;i++){var r=p[i],a=r.template,u=k.eq(i);if(a!==undefined)v=kendo.template(a),u.html(v(o));else{var s=o[r.field],y=r.format,f=r.values;if(f!==undefined&&f!=null){for(e=0;e<f.length;e++)if(h=f[e],h.value==s){u.html(h.text);break}}else y!==undefined?u.html(kendo.format(y,s)):u.html(s)}}enableDisableInputControls(o,c)}$("#progress_"+o.MyHRID).tooltip("show");$("#progressUSD_"+o.MyHRID).tooltip("show")}function enableDiasableMeritTextBox(n,t){var i=$("#ReporteeGrid .k-grid-content").find("tr");$(i[n]).find("[id*=txtMeritPCT]").attr("disabled",t);setDisable(n,GridDisplay=="USD"?"txtMeritAmtUSD":"txtMeritAmtLocal",t)}function enableDiasableLumpSumTextBox(n,t){var i=$("#ReporteeGrid .k-grid-content").find("tr");$(i[n]).find("[id*=txtLumpSumPct]").attr("disabled",t);setDisable(n,GridDisplay=="USD"?"txtLumpSumAmtUSD":"txtLumpSumAmtLocal",t)}function meritVisibility(n,t){var i=$("#ReporteeGrid .k-grid-content").find("tr");$(i[t]).find("[id*=txtMeritPCT]").attr("disabled",!0);$(i[t]).find("[id*=txtLumpSumPct]").attr("disabled",!0);setDisable(t,GridDisplay=="USD"?"txtMeritAmtUSD":"txtMeritAmtLocal",!0);setDisable(t,GridDisplay=="USD"?"txtLumpSumAmtUSD":"txtLumpSumAmtLocal",!0)}function adjustmentVisibility(n,t){var i=$("#ReporteeGrid .k-grid-content").find("tr");$(i[t]).find("[id*=txtAdjustmentPct]").attr("disabled",!0);setDisable(t,GridDisplay=="USD"?"txtAdjustmentAmtUSD":"txtAdjustmentAmtLocal",!0)}function promotionVisibility(n,t){setDisable(t,GridDisplay=="USD"?"txtPromotionAmtUSD":"txtPromotionAmtLocal",!0);setDisable(t,GridDisplay=="USD"?"txtPromotionPctUSD":"txtPromotionPctLocal",!0)}function promotionControlsBeforeNewTitle(n,t){(n.NewTitle==undefined||n.NewTitle==null||n.NewTitle==undefined||n.NewTitle==null)&&(setDisable(t,GridDisplay=="USD"?"txtPromotionAmtUSD":"txtPromotionAmtLocal",!0),setDisable(t,GridDisplay=="USD"?"txtPromotionPctUSD":"txtPromotionPctLocal",!0))}function HideSubmitApproveCheckBoxes(){}function showApproveReopenButtonVisiblity(n){((n.WorkFlowStatus=="ActionRequired"||n.WorkFlowStatus=="Reopen")&&approveVisiblity==!1&&n.IsFirstLevelManager==0||n.WorkFlowStatus!="InProgress"&&n.IsSuperAdmin==!0&&approveVisiblity==!1)&&(approveVisiblity=!0);(n.WorkFlowStatus=="InProgress"||n.WorkFlowStatus=="Reopen")&&submitVisiblity==!1&&(submitVisiblity=!0);approveReopenButtonVisiblity(approveVisiblity,n.approvalCount,n.reopenCount);submitButtonVisiblity(submitVisiblity,n.submitCount)}function approveReopenButtonVisiblity(n,t,i){n==!0?(t>0&&$("#btnApprove").show(),i>0&&$("#Reject").show()):($("#btnApprove").hide(),$("#Reject").hide())}function submitButtonVisiblity(n,t){n==!0&&t>0?$("#btnSubmit").show():$("#btnSubmit").hide()}function onMeritReporteesBound(){var t,i;if(approveVisiblity=!1,submitVisiblity=!1,$("#ReporteeGrid").data("kendoGrid").dataSource._data.length>0){var n=$("#ReporteeGrid").data("kendoGrid"),u=n.tbody.children("tr"),r=n.dataSource.view();$.each(r,function(n,t){enableDisableInputControls(t,n);checkMeritGuideLine(t,n);checkAdjustmentGuideLine(t,n);checkPromotionGuideLine(t,n);checkLumpSumGuideLine(t,n);showApproveReopenButtonVisiblity(t)});$.each(n.columns,function(){var t=n.columns.indexOf(this);this.field&&this.field.match("USD")=="USD"||this.template&&this.template.match("USD")=="USD"?GridDisplay=="USD"?($("#ReporteeGrid table th:nth-child("+t+")").show(),$("#ReporteeGrid table td:nth-child("+t+")").show()):($("#ReporteeGrid table th:nth-child("+t+")").hide(),$("#ReporteeGrid table td:nth-child("+t+")").hide()):(this.field&&this.field.match("Local")=="Local"||this.template&&this.template.match("Local")=="Local")&&(GridDisplay=="Local"?($("#ReporteeGrid table th:nth-child("+t+")").show(),$("#ReporteeGrid table td:nth-child("+t+")").show()):($("#ReporteeGrid table th:nth-child("+t+")").hide(),$("#ReporteeGrid table td:nth-child("+t+")").hide()))});applyKendoControlStyles();$("[id*=progress_]").tooltip({trigger:"manual"}).tooltip("show");$(".grid-popover").tooltip({trigger:"manual"}).tooltip("show")}else $("#ReporteeGrid").data("kendoGrid").dataSource._data.length==0&&(t=$("#ReporteeGrid").data("kendoGrid"),t.dataSource._view.length==0&&(i=$("#ReporteeGrid").find("th").length,$("#ReporteeGrid .k-grid-content").find("table").css("width",""),$("#ReporteeGrid .k-grid-content").find("tbody").append('<tr class="kendo-data-row"><td colspan="'+i+'" style="text-align:center;background-color:#6686C4;color:white !important;">No Results Found!<\/td><\/tr>')))}function enableDisableInputControls(n,t){var i=$("#ReporteeGrid .k-grid-content").find("tr");$(i[t]).find("input").attr("disabled",n.IsLocked||n.CurrentAnnualSalaryLocalForCalc<=0);n.IsLocked||n.CurrentAnnualSalaryLocalForCalc==0||(RuleConfiguration.EitherMeritOrlumpsum&&(enableDiasableMeritTextBox(t,n.LumpSumPct!=null),enableDiasableLumpSumTextBox(t,n.MeritPCT!=null)),n.IsMeritEligible||meritVisibility(n,t),n.IsAdjustmentEligible||adjustmentVisibility(n,t),n.IsPromotionEligible?promotionControlsBeforeNewTitle(n,t):promotionVisibility(n,t))}function requestPage(n){if(!showSaveWarning(n,"objChangeFlag"))return n.preventDefault(),!1}function formatBudgetCurrency(n,t,i){var e,u,o,r,f;return n==null?"":isNaN(n)?"":(e=$("#ddlLocalCurrencies").data("kendoDropDownList").dataItem($("#ddlLocalCurrencies").data("kendoDropDownList").select()),u=kendo.cultures[i],u=u!=undefined?u.numberFormat.currency.symbol:kendo.cultures["en-US"].numberFormat.currency.symbol,o=e!=undefined?e.CurrencyCode:"USD",n.length==1||t==undefined?n.toString():i==undefined?(r=kendo.toString(n,t),r=r.indexOf("-")>-1?"("+r.replace("-","")+")":r,RuleConfiguration.FeatureConfigurationCurrencyCodeDisplay&&(r=r.replace(u,o+" ")),r):(f=kendo.toString(n,t,i),f=f.indexOf("-")>-1?"("+f.replace("-","")+")":f,f.replace(u,o+" ")))}function formatGridCurrency(n,t,i,r){var f,e,o,u;if(n==null||isNaN(n))return"";if(n=eval(n),f=kendo.cultures[r],f=f!=undefined?f.numberFormat.currency.symbol:kendo.cultures["en-US"].numberFormat.currency.symbol,i=="percentage")return e=getCultureFormat(t,i),u=formatValue(n/100,e,r),u=u.replace(" ",""),u=u.indexOf("-")>-1?"("+u.replace("-","")+")":u,RuleConfiguration.FeatureConfigurationCurrencyCodeDisplay&&GridDisplay=="Local"&&(u=u.replace(f,"")),u;var e=getCultureFormat(t,i),s=parseInt(e[1]),h=n.toString();return numberOfDecimalPlaces(n)!=0&&(o=h.split(".")[1].length,o<s&&(e="c"+o)),u=formatValue(n,e,r),u=u.replace(" ",""),u=u.indexOf("-")>-1?"("+u.replace("-","")+")":u,RuleConfiguration.FeatureConfigurationCurrencyCodeDisplay&&GridDisplay=="Local"&&(u=u.replace(f,"")),u}function numberOfDecimalPlaces(n){let t=(n+"").match(/(?:\.(\d+))?$/);return!t||!t[1]?0:t[1].length}function check_float(n,t){var i="";if(i=n.which==undefined?n.keyCode:n.which,t.readOnly!=!0)return(i<=57||i==0||i==13||i==8||i==37||i==16)?!0:(n.preventDefault(),!1)}function checkPercentage(n){return!n.match(/^([0-9]{0,1})*\.?[0-9]+%?$/)&&n.length>0?(showAlert("Only numbers are allowed!"),!1):!0}function roundingRule(n,t,i){if(i=="percentage"){if(t=="merit"){var u=RuleConfiguration.GeneralConfigurationRoundingMeritPct.toLowerCase(),f=RuleConfiguration.GeneralConfigurationDecimalMeritPct,r=roundingNumbers(u,n,f);return r==undefined||r==null||r==""||r==NaN?0:r}if(t=="adjustment"){var u=RuleConfiguration.GeneralConfigurationRoundingAdjustmentPct.toLowerCase(),f=RuleConfiguration.GeneralConfigurationDecimalAdjustmentPct,r=roundingNumbers(u,n,f);return r==undefined||r==null||r==""||r==NaN?0:r}if(t=="lumpsum"){var u=RuleConfiguration.GeneralConfigurationRoundingLumpSumPct.toLowerCase(),f=RuleConfiguration.GeneralConfigurationDecimalLumpSumPct,r=roundingNumbers(u,n,f);return r==undefined||r==null||r==""||r==NaN?0:r}if(t=="promotion"){var u=RuleConfiguration.GeneralConfigurationRoundingPromotionPct.toLowerCase(),f=RuleConfiguration.GeneralConfigurationDecimalPromotionPct,r=roundingNumbers(u,n,f);return r==undefined||r==null||r==""||r==NaN?0:r}if(t=="bonus"){var u=RuleConfiguration.GeneralConfigurationRoundingBonusPct.toLowerCase(),f=RuleConfiguration.GeneralConfigurationDecimalBonusPct,r=roundingNumbers(u,n,f);return r==undefined||r==null||r==""||r==NaN?0:r}if(t=="general"){var u="absolute",f="0.01",r=roundingNumbers(u,n,f);return r==undefined||r==null||r==""||r==NaN?0:r}}else if(i=="annual"){if(t=="merit"){var u=RuleConfiguration.GeneralConfigurationRoundingMeritAnnual.toLowerCase(),f=RuleConfiguration.GeneralConfigurationDecimalMeritAnnual,r=roundingNumbers(u,n,f);return r==undefined||r==null||r==""||r==NaN?0:r}if(t=="adjustment"){var u=RuleConfiguration.GeneralConfigurationRoundingAdjustmentAnnual.toLowerCase(),f=RuleConfiguration.GeneralConfigurationDecimalAdjustmentAnnual,r=roundingNumbers(u,n,f);return r==undefined||r==null||r==""||r==NaN?0:r}if(t=="promotion"){var u=RuleConfiguration.GeneralConfigurationRoundingPromotionAnnual.toLowerCase(),f=RuleConfiguration.GeneralConfigurationDecimalPromotionAnnual,r=roundingNumbers(u,n,f);return r==undefined||r==null||r==""||r==NaN?0:r}if(t=="lumpsum"){var u=RuleConfiguration.GeneralConfigurationRoundingLumpSumAnnual.toLowerCase(),f=RuleConfiguration.GeneralConfigurationDecimalLumpSumAnnual,r=roundingNumbers(u,n,f);return r==undefined||r==null||r==""||r==NaN?0:r}if(t=="bonus"){var u=RuleConfiguration.GeneralConfigurationRoundingBonusAnnual.toLowerCase(),f=RuleConfiguration.GeneralConfigurationDecimalBonusAnnual,r=roundingNumbers(u,n,f);return r==undefined||r==null||r==""||r==NaN?0:r}if(t=="newsalary"){var u=RuleConfiguration.GeneralConfigurationRoundingNewSalaryAnnual.toLowerCase(),f=RuleConfiguration.GeneralConfigurationDecimalNewSalaryAnnual,r=roundingNumbers(u,n,f);return r==undefined||r==null||r==""||r==NaN?0:r}if(t=="currentsalary"){var u=RuleConfiguration.GeneralConfigurationRoundingCurrentSalaryAnnual.toLowerCase(),f=RuleConfiguration.GeneralConfigurationDecimalCurrentSalaryAnnual,r=roundingNumbers(u,n,f);return r==undefined||r==null||r==""||r==NaN?0:r}if(t=="finalbonus"){var u=RuleConfiguration.GeneralConfigurationRoundingFinalBonusAnnual.toLowerCase(),f=RuleConfiguration.GeneralConfigurationDecimalFinalBonusAnnual,r=roundingNumbers(u,n,f);return r==undefined||r==null||r==""||r==NaN?0:r}if(t=="general"){var u="absolute",f="0.001",r=roundingNumbers(u,n,f);return r==undefined||r==null||r==""||r==NaN?0:r}if(t=="tccgeneral"){var u="absolute",f="1",r=roundingNumbers(u,n,f);return r==undefined||r==null||r==""||r==NaN?0:r}}else if(i=="hourly"){if(t=="merit"){var u=RuleConfiguration.GeneralConfigurationRoundingMeritHourly.toLowerCase(),f=RuleConfiguration.GeneralConfigurationDecimalMeritHourly,r=roundingNumbers(u,n,f);return r==undefined||r==null||r==""||r==NaN?0:r}if(t=="adjustment"){var u=RuleConfiguration.GeneralConfigurationRoundingAdjustmentHourly.toLowerCase(),f=RuleConfiguration.GeneralConfigurationDecimalAdjustmentHourly,r=roundingNumbers(u,n,f);return r==undefined||r==null||r==""||r==NaN?0:r}if(t=="promotion"){var u=RuleConfiguration.GeneralConfigurationRoundingPromotionHourly.toLowerCase(),f=RuleConfiguration.GeneralConfigurationDecimalPromotionHourly,r=roundingNumbers(u,n,f);return r==undefined||r==null||r==""||r==NaN?0:r}if(t=="lumpsum"){var u=RuleConfiguration.GeneralConfigurationRoundingLumpSumHourly.toLowerCase(),f=RuleConfiguration.GeneralConfigurationDecimalLumpSumHourly,r=roundingNumbers(u,n,f);return r==undefined||r==null||r==""||r==NaN?0:r}if(t=="bonus"){var u=RuleConfiguration.GeneralConfigurationRoundingBonusHourly.toLowerCase(),f=RuleConfiguration.GeneralConfigurationDecimalBonusHourly,r=roundingNumbers(u,n,f);return r==undefined||r==null||r==""||r==NaN?0:r}if(t=="newsalary"){var u=RuleConfiguration.GeneralConfigurationRoundingNewSalaryHourly.toLowerCase(),f=RuleConfiguration.GeneralConfigurationDecimalNewSalaryHourly,r=roundingNumbers(u,n,f);return r==undefined||r==null||r==""||r==NaN?0:r}if(t=="currentsalary"){var u=RuleConfiguration.GeneralConfigurationRoundingCurrentSalaryHourly.toLowerCase(),f=RuleConfiguration.GeneralConfigurationDecimalCurrentSalaryHourly,r=roundingNumbers(u,n,f);return r==undefined||r==null||r==""||r==NaN?0:r}if(t=="general"){var u="absolute",f="0.01",r=roundingNumbers(u,n,f);return r==undefined||r==null||r==""||r==NaN?0:r}}else if(i=="comparatio"){var u=RuleConfiguration.GeneralConfigurationRoundingCompaRatioPct.toLowerCase(),f=RuleConfiguration.GeneralConfigurationDecimalCompaRatioPct,r=roundingNumbers(u,n,f);return r==undefined||r==null||r==""||r==NaN?0:r}}function roundingNumbers(n,t,i){var r=getdecimalPlaces(i),u;if(i==50){if(n=="absolute")return 50*Math.round(t/50);if(n=="roundup")return 50*Math.ceil(t/50);if(n=="rounddown")return 50*Math.floor(t/50);if(n=="nearest")return 50*Math.round(t/50)}if(r>0){if(n=="absolute")return Number(Math.round(t+"e"+r)+"e-"+r);if(n=="roundup")return Number(Math.ceil(t+"e"+r)+"e-"+r);if(n=="rounddown")return Number(Math.floor(t+"e"+r)+"e-"+r);if(n=="nearest")return Number(t.toFixed(r))}else{if(r=Math.abs(r),n=="absolute")return Number(Math.round(t+"e-"+r)+"e"+r);if(n=="roundup")return Number(Math.ceil(t+"e-"+r)+"e"+r);if(n=="rounddown")return Number(Math.floor(t+"e-"+r)+"e"+r);if(n=="nearest")return Number(Math.round(t/i)*i)}}function allowDecimalNumberOnlyInput(n,t,i){var r=[46,8,9,27,13],u,f;if(t=="."&&(r=[46,8,9,27,13,110,190]),$.inArray(n.keyCode,r)!==-1||n.keyCode==65&&(n.ctrlKey===!0||n.metaKey===!0)||n.keyCode>=35&&n.keyCode<=40||n.key==t){(n.keyCode==190||n.keyCode==110||n.keyCode==46)&&(u=new RegExp("\\."),f=u.exec(i.value),f=="."&&n.preventDefault());return}(n.shiftKey||n.keyCode<48||n.keyCode>57)&&(n.keyCode<96||n.keyCode>105)&&n.preventDefault()}function allowDecimalNumberOnlyInputAmt(n,t){var i=[46,8,9,27,13];(t=="."&&(i=[46,8,9,27,13,110,190]),$.inArray(n.keyCode,i)!==-1||n.keyCode==65&&(n.ctrlKey===!0||n.metaKey===!0)||n.keyCode>=35&&n.keyCode<=40||n.key==t)||(n.shiftKey||n.keyCode<48||n.keyCode>57)&&(n.keyCode<96||n.keyCode>105)&&n.preventDefault()}function decimalPlaces(n){var t=(""+n).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}function getdecimalPlaces(n){var t=decimalPlaces(n),i;return t<=0&&(i=n.toString().replace(/[^0]/g,"").length,t=-Math.abs(i)),t}function getnoOfDecimalPlaces(n){return decimalPlaces(n)}function getCultureFormat(n,t){var r,i;if(t=="percentage"){if(n=="merit")return r=RuleConfiguration.GeneralConfigurationDecimalMeritPct,i=getnoOfDecimalPlaces(r),("p"+i).toString();if(n=="adjustment")return r=RuleConfiguration.GeneralConfigurationDecimalAdjustmentPct,i=getnoOfDecimalPlaces(r),("p"+i).toString();if(n=="promotion")return r=RuleConfiguration.GeneralConfigurationDecimalPromotionPct,i=getnoOfDecimalPlaces(r),("p"+i).toString();if(n=="lumpsum")return r=RuleConfiguration.GeneralConfigurationDecimalLumpSumPct,i=getnoOfDecimalPlaces(r),("p"+i).toString();if(n=="bonus")return r=RuleConfiguration.GeneralConfigurationDecimalBonusPct,i=getnoOfDecimalPlaces(r),("p"+i).toString();if(n=="general")return"p2".toString()}else if(t=="annual"){if(n=="merit")return r=RuleConfiguration.GeneralConfigurationDecimalMeritAnnual,i=getnoOfDecimalPlaces(r),("c"+i).toString();if(n=="adjustment")return r=RuleConfiguration.GeneralConfigurationDecimalAdjustmentAnnual,i=getnoOfDecimalPlaces(r),("c"+i).toString();if(n=="promotion")return r=RuleConfiguration.GeneralConfigurationDecimalPromotionAnnual,i=getnoOfDecimalPlaces(r),("c"+i).toString();if(n=="lumpsum")return r=RuleConfiguration.GeneralConfigurationDecimalLumpSumAnnual,i=getnoOfDecimalPlaces(r),("c"+i).toString();if(n=="bonus")return r=RuleConfiguration.GeneralConfigurationDecimalBonusAnnual,i=getnoOfDecimalPlaces(r),("c"+i).toString();if(n=="newsalary")return r=RuleConfiguration.GeneralConfigurationDecimalNewSalaryAnnual,i=getnoOfDecimalPlaces(r),("c"+i).toString();if(n=="currentsalary")return r=RuleConfiguration.GeneralConfigurationDecimalCurrentSalaryAnnual,i=getnoOfDecimalPlaces(r),("c"+i).toString();if(n=="finalbonus")return r=RuleConfiguration.GeneralConfigurationDecimalFinalBonusAnnual,i=getnoOfDecimalPlaces(r),("c"+i).toString();if(n=="general"||n=="tccgeneral")return"c0".toString()}else if(t=="hourlyrate"){if(n=="merit")return r=RuleConfiguration.GeneralConfigurationDecimalMeritHourly,i=5,("c"+i).toString();if(n=="adjustment")return r=RuleConfiguration.GeneralConfigurationDecimalAdjustmentHourly,i=getnoOfDecimalPlaces(r),("c"+i).toString();if(n=="promotion")return r=RuleConfiguration.GeneralConfigurationDecimalPromotionHourly,i=getnoOfDecimalPlaces(r),("c"+i).toString();if(n=="lumpsum")return r=RuleConfiguration.GeneralConfigurationDecimalLumpSumHourly,i=getnoOfDecimalPlaces(r),("c"+i).toString();if(n=="bonus")return r=RuleConfiguration.GeneralConfigurationDecimalBonusHourly,i=getnoOfDecimalPlaces(r),("c"+i).toString();if(n=="newsalary")return r=RuleConfiguration.GeneralConfigurationDecimalNewSalaryHourly,i=getnoOfDecimalPlaces(r),("c"+i).toString();if(n=="currentsalary")return r=RuleConfiguration.GeneralConfigurationDecimalCurrentSalaryHourly,i=getnoOfDecimalPlaces(r),("c"+i).toString();if(n=="general")return"c0".toString()}else if(t=="hourly"){if(n=="merit")return r=RuleConfiguration.GeneralConfigurationDecimalMeritHourly,i=getnoOfDecimalPlaces(r),("c"+i).toString();if(n=="adjustment")return r=RuleConfiguration.GeneralConfigurationDecimalAdjustmentHourly,i=getnoOfDecimalPlaces(r),("c"+i).toString();if(n=="promotion")return r=RuleConfiguration.GeneralConfigurationDecimalPromotionHourly,i=getnoOfDecimalPlaces(r),("c"+i).toString();if(n=="lumpsum")return r=RuleConfiguration.GeneralConfigurationDecimalLumpSumHourly,i=getnoOfDecimalPlaces(r),("c"+i).toString();if(n=="bonus")return r=RuleConfiguration.GeneralConfigurationDecimalBonusHourly,i=getnoOfDecimalPlaces(r),("c"+i).toString();if(n=="newsalary")return r=RuleConfiguration.GeneralConfigurationDecimalNewSalaryHourly,i=getnoOfDecimalPlaces(r),("c"+i).toString();if(n=="currentsalary")return r=RuleConfiguration.GeneralConfigurationDecimalCurrentSalaryHourly,i=getnoOfDecimalPlaces(r),("c"+i).toString();if(n=="general")return"c0".toString()}else if(t=="comparatio")return r=RuleConfiguration.GeneralConfigurationDecimalCompaRatioPct,i=getnoOfDecimalPlaces(r),("n"+i).toString()}function CharacterCount(n){var t=n.value(),i=$("<div>").html(t).text();return i.length}function KeyDown(n){var r=n.charCode||n.keyCode,t,i;[8,9,35,36,37,38,39,40,46].indexOf(r)==-1&&(t=CharacterCount(this),i=this.textarea[0].maxLength,t+1>i&&n.preventDefault())}function KeyUp(){var n=CharacterCount(this),t="#"+this.textarea[0].getAttribute("countid");$(t)[0].value=n}function Paste(n){var r=this.textarea[0].maxLength,u=this,f=$(n.sender.element).data("kendoEditor"),e="#"+this.textarea[0].getAttribute("countid"),t,i;n.html=$("<div><\/div>").html(n.html).text();t=$("<div><\/div>").html(f.value()).text().length;i=n.html.length;t+i>r&&(n.html="",alert("Exceeds characters Limit"),$(e)[0].value=CharacterCount(u))}function Select(){this.focus()}function Change(){inputChanged=!0}function GetReporteesCompParam(){var n=$('input[name="__RequestVerificationToken"]').val();return{__RequestVerificationToken:n,selectedManagerNum:$("#hndSelectedManagerNum").val(),compMenuType:$("#hndMenuType").val(),isRollup:$("#hndIsRollup").val()==1}}function PutReporteesCompParam(){var n=$('input[name="__RequestVerificationToken"]').val();return{__RequestVerificationToken:n}}function enableDisableCheckBox(n,t){for(var r=$("[id$="+n+"]").length,i=0;i<r;i++)$("[id$="+n+"]")[i].disabled=t}function newCompProgressBar(n,t,i,r,u,f){var o,e;return f=="annual"?(o=(r-i)/100,e=(t-i)/o,e<0||n<=0?"none":e<=100?"#1abb9c":"#c7342a"):(o=(r-i)/100,e=(u-i)/o,e<0||n<=0?"none":e<=100?"#1abb9c":"#c7342a")}function newCompPrgWidth(n,t,i,r,u,f){var e,o;return f=="annual"?(e=(r-i)/100,o=(t-i)/e,n<=0)?0:o:(e=(r-i)/100,o=(u-i)/e,n<=0)?0:o}function createChart(n,t,i,r,u){var c,e,f,s,o;i=i;c=(RuleConfiguration.FeatureConfigurationMerit?parseFloat(t):0)+(RuleConfiguration.FeatureConfigurationLumpSum?parseFloat(i):0)+(RuleConfiguration.FeatureConfigurationPromotion?parseFloat(u):0);e=(RuleConfiguration.FeatureConfigurationMerit?parseFloat(t):0)+(RuleConfiguration.FeatureConfigurationLumpSum?parseFloat(i):0)+(RuleConfiguration.FeatureConfigurationPromotion?parseFloat(u):0);e=e>0?e:200;f=parseFloat(n)+parseFloat(e);f=f==0?1:f;s=parseFloat(c)/parseFloat(f)*100;s=s!=Infinity?s:0;o=parseFloat(e)/parseFloat(f)*100;o=o!=Infinity?o:0;o=parseFloat(e)>parseFloat(f)?o:100;var h=(t/f*100).toFixed(2),l=(u/f*100).toFixed(2),p=(i/f*100).toFixed(2),w=parseFloat(h)+parseFloat(l),a=parseFloat(h)+parseFloat(l)+parseFloat(p),v=h/a*100,y=w/a*100;$("#gauge").kendoRadialGauge({pointer:{value:65,color:"transparent"},gaugearea:{margin:20},scale:{minorUnit:5,startAngle:-30,endAngle:210,max:100,labels:{position:"inside",visible:!1},ranges:[{from:0,to:v,color:"#F79646"},{from:v,to:y,color:"#4BACC6"},{from:y,to:100,color:"#b65708"}]}})}function onChange(){var n=$("#ddlLocalCurrencies").data("kendoDropDownList").dataItem($("#ddlLocalCurrencies").data("kendoDropDownList").select());ddlcurrencyDropOldvalue!=n.CurrencyNum&&(ddlcurrencyDropOldvalue=n.CurrencyNum,ddlCurrencyCulture=n.CultureCode,ddlExchangeRate=n.ExchangeRate,ddlCurrencyCodeNum=n.CurrencyNum);BindBudgetData()}function roundBudget(n){return Number(Math.round(n+"e2")+"e-2")}function roundToWholeNumber(n){return Number(Math.round(n))}function formatBudgetCurrency(n,t,i){var e,f,o,r,u;return n==null?"":isNaN(n)?"":(e=$("#ddlLocalCurrencies").data("kendoDropDownList").dataItem($("#ddlLocalCurrencies").data("kendoDropDownList").select()),f=kendo.cultures[i],f=f!=undefined?f.numberFormat.currency.symbol:kendo.cultures["en-US"].numberFormat.currency.symbol,o=e!=undefined?e.CurrencyCode:"USD",n.length==1||t==undefined?n.toString():i==undefined?(r=kendo.toString(n,t),r=r.indexOf("-")>-1?"("+r.replace("-","")+")":r,RuleConfiguration.FeatureConfigurationCurrencyCodeDisplay&&(r=r.replace(f,o+" ")),r):(u=kendo.toString(n,t,i),u=u.indexOf("-")>-1?"("+u.replace("-","")+")":u,RuleConfiguration.FeatureConfigurationCurrencyCodeDisplay&&(u=u.replace(f,o+" ")),u))}function refreshBudgetGrid(){var n=$("#grdDirectBudget").data("kendoGrid");n.dataSource.read()}function dataBound(){var t=$("#ddlLocalCurrencies").data("kendoDropDownList"),n;return t.dataSource._data.length>0&&(DefaultCurrencyNum!="0"?t.value(DefaultCurrencyNum):t.value(0),ddlcurrencyDropOldvalue=t.value(),n=t.dataItem($("#ddlLocalCurrencies").data("kendoDropDownList").select()),n!=undefined&&(ddlCurrencyCodeNum=n.CurrencyNum,ddlCurrencyCulture=n.CultureCode!=undefined?n.CultureCode:"en-US",ddlExchangeRate=n.ExchangeRate!=undefined?n.ExchangeRate:1),BindBudgetData()),!1}function closeAfterMeritSlide(){ClearCommentChangeFlag();isPopupEdited=!0;$("#divMeritComment").modal("hide")}function meritCommentDelete(n){var i=$("#CommentPopup").data("kendoWindow").options.readOnly,r=$("#CommentPopup").data("kendoWindow").options.Values,u=document.getElementById("comment_"+n),t;return($("comment_"+n).hide(),i)?!1:meritmandCommentsCount<=1?(showAlert("You cannot delete the comment as they are tied to Merit/Promotion increase"),!1):(n!=0&&n!=undefined&&(t=$('input[name="__RequestVerificationToken"]').val(),$.ajax({url:"../Compensation/DeleteComment",data:{__RequestVerificationToken:t,commentKey:n},type:"post",success:function(){Successmessage("Deleted Successfully");inputChanged=!1;var n=$("#ReporteeGrid").data("kendoGrid"),t=$(n.tbody).find("tr").eq(r),i=n.dataItem(t);i.TotalCommentsCount=i.TotalCommentsCount-1;meritmandCommentsCount=meritmandCommentsCount-1;refreshRow(n,t);u.style.display="none";$("#divMeritComment").modal("hide")}})),!1)}function meritEditClick(n,t){var r=$("#btnMeritEdit_"+n).attr("data-myitemid"),i;$("#meritEditBox"+t+"_"+n).text(r);$("#meritcomment").css("display","none");$("#btnMeritMandateSave").css("display","none");$("#meritSaveBtn"+t+"_"+n).show();$("#meritCloseBtn"+t+"_"+n).show();i=$("#meritEditBox"+t+"_"+n).is(":visible");i?($("#meritText"+t+"_"+n).show(),$("#meritcomment").show(),$("#btnMeritMandateSave").show()):$("#meritText"+t+"_"+n).css("display","none");lastEditedCommentNum!=n&&(lastEditedCommentNum!=0&&(i=$("#meritEditBox"+t+"_"+lastEditedCommentNum).is(":visible"),i&&($("#meritText"+t+"_"+lastEditedCommentNum).show(),$("#meritCollapse_"+lastEditedCommentNum).removeClass("in"))),lastEditedCommentNum=n)}function saveMeritComment(n,t,i){var o=$("#meritEditBox"+i+"_"+n).attr("data-commentLabel"),r;if($("#IsMeritEditItem").val(!0),r=$("#meritEditBox"+i+"_"+n).val(),$("#MeritEmpCommentNum").val(n),$("#meritcomment").text(r),$("#CompensationTypeNum").val(t),$("#frmMeritComment").submit(),revertRowIndex!=null){revertRowData=null;revertRowIndex=null;revertMeritPct=null;revertMeritlocalAmt=null;revertMeritUSDAmt=null;var u=$("#CommentPopup").closest(".k-window-content").data("kendoWindow").options.Values,f=$("#CommentPopup").data("kendoWindow").options.rowData,e=$("#CommentPopup").data("kendoWindow").options.row;calculateMeritAmt(f,u,e)}}function cancelMeritComment(n,t,i){$("#meritText"+i+"_"+n).show();$("#meritSaveBtn"+i+"_"+n).hide();$("#meritCloseBtn"+i+"_"+n).hide();$("#meritCollapse_"+n).removeClass("in");$("#meritCollapse_"+n).addClass("collapse");$("#meritcomment").show();$("#btnMeritMandateSave").show()}function rollUpDirectDisabled(){isRollUpEnabled=!1;isDirectEnabled=!1;rollUpDirectVisibility()}function rollUpDirectEnabled(){isRollUpEnabled=!0;isDirectEnabled=!0;rollUpDirectVisibility()}function rollUpDirectVisibility(){isDirectEnabled===!0&&$("#btnDirect").prop("disabled",!1);isDirectEnabled===!1&&$("#btnDirect").prop("disabled",!0);isRollUpEnabled===!0&&$("#btnRollUp").prop("disabled",!1);isRollUpEnabled===!1&&$("#btnRollUp").prop("disabled",!0)}function select(n){n.item[0].innerText!="Show in USD"&&n.item[0].innerText!="Show in Local"&&(n._defaultPrevented=!showSaveWarning(n))}function OnselectTypeChange(){var u=$("#ddlActions").data("kendoDropDownList").dataItem($("#ddlActions").data("kendoDropDownList").select()),i=this.dataItem(),n=i.Value,r=$("#ddlActions").data("kendoDropDownList"),t;n=="Filter"?($("body").css("overflow","hidden"),$.ajax({url:"../Compensation/_FilterSort",type:"POST",cache:!1,async:!0,dataType:"html",success:function(n){$("#wndFilterSort").html(n);var t=$("#wndFilterSort").data("kendoWindow");t.options.gridName="ReporteeGrid";t.center().open()}})):n=="ClearFilter"?(clearFilterSort(),$("#ddlActions_listbox .k-item")[2].style.display="None",refreshGrid()):n=="USD"?(t=$("#ReporteeGrid").data("kendoGrid"),GridDisplay=n,t.refresh(),displayLocal()):n=="Local"&&(GridDisplay=n,t=$("#ReporteeGrid").data("kendoGrid"),t.refresh(),displayUSD());r.select(0)}function displayUSD(){setDisplayForddlActions("USD","Block");setDisplayForddlActions("Local","None")}function displayLocal(){setDisplayForddlActions("USD","None");setDisplayForddlActions("Local","Block")}function setDisplayForddlActions(n,t){$("#ddlActions_listbox .k-item").filter(function(){return $.text([this]).indexOf(n)>-1}).each(function(){this.style.display=t})}function ddlActionsDataBound(){$("#ddlActions_listbox .k-item")[0].style.display="None";$("#ddlActions_listbox .k-item")[2].style.display="None";$("#ddlActions_listbox .k-item")[3].style.display="None";RuleConfiguration.FeatureConfigurationMultiCurrencyDisplay?displayUSD():(setDisplayForddlActions("USD","None"),setDisplayForddlActions("Local","None"))}function lumpSumRule1(n){(RuleConfiguration.LumpSumRuleLumpSumType==meritPageConstants.LumpSumTypeAutoCalcWithOutOverride||RuleConfiguration.LumpSumRuleLumpSumType==meritPageConstants.LumpSumTypeAutoCalcWithOverride)&&(RuleConfiguration.LumpSumRuleRangeMaxPct!=0?lumpSumTypeAutoCalcOverrideRangeMaxPCT(n):lumpSumTypeAutoCalcOverrideRangeMaxAmt(n))}function lumpSumTypeAutoCalcOverrideRangeMaxPCT(n){var t=(n.CurrentAnnualSalaryLocalForCalc!=null?n.CurrentAnnualSalaryLocalForCalc:0)+(n.MeritAmtLocal!=null?n.MeritAmtLocal:0),i=n.CurrentAnnualSalaryLocalForCalc>RuleConfiguration.LumpSumRuleRangeMaxPct*n.MktMaxLocal/100?n.CurrentAnnualSalaryLocalForCalc:RuleConfiguration.LumpSumRuleRangeMaxPct*n.MktMaxLocal/100;t>i?calculateMeritAndLumpSumAmount(n,t,i):(n.LumpSumAmtUSD=0,n.LumpSumAmtLocal=0,n.LumpSumPct=0)}function lumpSumTypeAutoCalcOverrideRangeMaxAmt(n){var i=(n.CurrentAnnualSalaryLocalForCalc!=null?n.CurrentAnnualSalaryLocalForCalc:0)+(n.MeritAmtLocal!=null?n.MeritAmtLocal:0),t=RuleConfiguration.LumpSumRuleRangeMaxAmt+n.MktMaxLocal>n.CurrentAnnualSalaryLocalForCalc?RuleConfiguration.LumpSumRuleRangeMaxAmt+n.MktMaxLocal:n.CurrentAnnualSalaryLocalForCalc;i>t?(t=n.CurrentAnnualSalaryLocalForCalc>n.MktMaxLocal?n.CurrentAnnualSalaryLocalForCalc:t,calculateMeritAndLumpSumAmount(n,i,t)):(n.LumpSumAmtUSD=0,n.LumpSumAmtLocal=0,n.LumpSumPct=0)}function Change(){inputChanged=!0}function calculateMeritAndLumpSumAmount(n,t,i){var f=t-i,e=f,r,u,s,h;n.LumpSumAmtLocal=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(f,"lumpsum","annual"):roundingRule(f,"lumpsum","hourly");n.LumpSumAmtUSD=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(n.LumpSumAmtLocal*n.MeritExchangeRate,"general","annual"):roundingRule(n.LumpSumAmtLocal*n.MeritExchangeRate,"general","hourly");var c=calculateHourly(n.LumpSumAmtUSD),l=calculateHourly(n.LumpSumAmtLocal),o=n.LumpSumAmtLocal*100/n.CurrentAnnualSalaryLocalForCalc;n.LumpSumPct=roundingRule(o,"lumpsum","percentage");RuleConfiguration.MeritValuesReCalculate&&(r=(n.MeritAmtLocal!=null?n.MeritAmtLocal:0)-e,u=r*100/n.CurrentAnnualSalaryLocalForCalc,u=roundingRule(u,"merit","percentage"),n.MeritPCT=u,n.MeritAmtLocal=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(r,"merit","annual"):roundingRule(r,"merit","hourly"),n.MeritAmtUSD=n.EmployeeStatus.toLowerCase()=="annual"?roundingRule(n.MeritAmtLocal*n.MeritExchangeRate,"general","annual"):roundingRule(n.MeritAmtLocal*n.MeritExchangeRate,"general","hourly"),s=calculateHourly(n.MeritAmtLocal),h=calculateHourly(n.MeritAmtUSD))}function checKIsNaN(n){return isNaN(n)?0:n}function GetApprovalReporteesParam(){var n=$('input[name="__RequestVerificationToken"]').val();return{__RequestVerificationToken:n,selectedManagerNum:$("#hndSelectedManagerNum").val(),compMenuType:$("#hndMenuType").val(),isRollup:$("#hndIsRollup").val()==1}}function getApprovalStatus(){var n=$('input[name="__RequestVerificationToken"]').val();$.ajax({url:"../Compensation/GetApproveReopenStatus",type:"Post",cache:!1,data:{__RequestVerificationToken:n,selectedManagerNum:$("#hndSelectedManagerNum").val(),compMenuType:$("#hndMenuType").val(),isRollup:$("#hndIsRollup").val()==1},success:function(n){n?($("#btnApprove").show(),$("#Reject").show()):($("#btnApprove").hide(),$("#Reject").hide())}})}function onSelect_approvalEmployeeSearch(n){var t=n.item[0].innerText;approvalSelectedEmpID=t.split("-")[0].trim();approvalPageNo=1;approveGridDataBound()}function approveGridDataBound(){var n=$("#grdApproveReportees").data("kendoGrid"),r=n.dataSource._data.length,u=approvalSelectedEmpID==null?0:1,f,t,i;$("#approvalCount").text(r);f=n.dataSource.view().length>0?n.dataSource.view()[0]:null;t=n.dataSource.view();n.element.find(".k-grid-content").animate({scrollTop:0},400);n.dataSource._data.length==0&&(approvalSelectedEmpID=null,$("#approveChkAll").hide(),i=$("#grdApproveReportees").find("th").length,$("#grdApproveReportees").find("tbody").append('<tr class="kendo-data-row"><td colspan="'+i+'" style="text-align:left;background-color:#6686C4;padding-top:30px"><\/td><\/tr>'),$("#grdApproveReportees").find(".k-grid-content tbody tr td").css("padding-top",11).append('<b style="padding-left:100px;background-color:#6686C4 !important;color:white !important;">No Results Found!<\/b>'));$.each(t,function(t,i){if(approvalSelectedEmpID!=null&&i.EmployeeID==approvalSelectedEmpID){approvalSelectedEmpID=null;previousUid!=null&&n.tbody.find("tr[data-uid="+previousUid+"]")!=undefined&&n.tbody.find("tr[data-uid="+previousUid+"]").removeClass("selected");previousUid=i.uid;n.tbody.find("tr[data-uid="+i.uid+"]").addClass("selected");$("#grdApproveReportees .k-grid-content-locked").find("tr").eq(t).addClass("selected");var r=n.element.find("tbody").offset().top,u=n.tbody.find("tr[data-uid="+i.uid+"]").offset().top,f=u-r;n.element.find(".k-grid-content").animate({scrollTop:f},400)}});approvalSelectedEmpID!=null&&(approvalPageNo+=1);u==0&&$("#approveChkAll")[0].checked==!1&&$("#approveChkAll").click()}function approveSelectedEmployees(n){var t,i;objChangeFlag=!1;var f=eval($("#hndSelectedManagerNum").val()),e=$("#hndMenuType").val(),o=$("#hndIsRollup").val()==1,r=$("#grdApproveReportees").data("kendoGrid"),u=[],s=r.dataSource._data.length;for(t=0;t<s;t++)i=r.dataSource._data[t],i.ApprovalIsChecked==!0&&u.push(i);var h=$('input[name="__RequestVerificationToken"]').val(),c=JSON.stringify(u),l=JSON.parse(c);$.ajax({url:"../Compensation/CompApproval",type:"post",async:!0,cache:!1,data:{__RequestVerificationToken:h,selectedRows:l,selectedManagerNum:f,MenuType:e,isRollup:o,approvalStatus:2,comment:n},success:function(){refreshGridTreeChange();$("#divApprovePopup").modal("hide");Successmessage("Approved Successfully");var n=$("#ReporteeGrid .k-grid-content").find("tr");n.length>0&&$(n[0]).find("input")[1]!=undefined&&window.setTimeout(function(){$(n[0]).find("input")[1].focus()},50)}})}function GetReOpenReporteesParam(){var n=$('input[name="__RequestVerificationToken"]').val();return{__RequestVerificationToken:n,selectedManagerNum:$("#hndSelectedManagerNum").val(),compMenuType:$("#hndMenuType").val(),isRollup:$("#hndIsRollup").val()==1}}function onSelect_reopenEmployeeSearch(n){var t=n.item[0].innerText;reopenSelectedEmpID=t.split("-")[0].trim();reopenPageNo=1;reopenGridDataBound()}function reopenGridDataBound(){var n=$("#grdReopenReportees").data("kendoGrid"),t=n.dataSource._data.length,u,i,r;t!=0&&t!=undefined?$("#btnReopenSelectedEmployees").attr("disabled",!1):$("#btnReopenSelectedEmployees").attr("disabled",!0);$("#reopenCount").text(t);u=n.dataSource.view().length>0?n.dataSource.view()[0]:null;i=n.dataSource.view();n.element.find(".k-grid-content").animate({scrollTop:0},400);n.dataSource._data.length==0&&(reopenSelectedEmpID=null,$("#reopenChkAll").hide(),r=$("#grdReopenReportees").find("th").length,$("#grdReopenReportees").find("tbody").append('<tr class="kendo-data-row"><td colspan="'+r+'" style="text-align:left;background-color:#6686C4;padding-top:30px"><\/td><\/tr>'),$("#grdReopenReportees").find(".k-grid-content tbody tr td").css("padding-top",11).append('<b style="padding-left:100px;background-color:#6686C4 !important;color:white !important;">No Results Found!<\/b>'));$.each(i,function(t,i){if(reopenSelectedEmpID!=null&&i.EmployeeID==reopenSelectedEmpID){reopenSelectedEmpID=null;previousUid!=null&&n.tbody.find("tr[data-uid="+previousUid+"]")!=undefined&&n.tbody.find("tr[data-uid="+previousUid+"]").removeClass("selected");previousUid=i.uid;n.tbody.find("tr[data-uid="+i.uid+"]").addClass("selected");$("#grdReopenReportees .k-grid-content-locked").find("tr").eq(t).addClass("selected");var r=n.element.find("tbody").offset().top,u=n.tbody.find("tr[data-uid="+i.uid+"]").offset().top,f=u-r;n.element.find(".k-grid-content").animate({scrollTop:f},400)}});reopenSelectedEmpID!=null&&(reopenPageNo+=1)}function reopenSelectedEmployees(n){var t,i;objChangeFlag=!1;var f=eval($("#hndSelectedManagerNum").val()),e=$("#hndMenuType").val(),o=$("#hndIsRollup").val()==1,r=$("#grdReopenReportees").data("kendoGrid"),u=[],s=r.dataSource._data.length;for(t=0;t<s;t++)i=r.dataSource._data[t],i.ApprovalIsChecked==!0&&u.push(i);var h=JSON.stringify(u),c=JSON.parse(h),l=$('input[name="__RequestVerificationToken"]').val();$.ajax({url:"../Compensation/CompApproval",type:"post",cache:!1,data:{__RequestVerificationToken:l,selectedRows:c,selectedManagerNum:f,MenuType:e,isRollup:o,approvalStatus:3,comment:n},success:function(){refreshGridTreeChange();$("#divReopenPopup").modal("hide");Successmessage("Rejected Successfully");var n=$("#ReporteeGrid .k-grid-content").find("tr");n.length>0&&$(n[0]).find("input")[1]!=undefined&&window.setTimeout(function(){$(n[0]).find("input")[1].focus()},50)}})}function GetSubmitReporteesParam(){var n=$('input[name="__RequestVerificationToken"]').val();return{__RequestVerificationToken:n,selectedManagerNum:$("#hndSelectedManagerNum").val(),compMenuType:$("#hndMenuType").val(),isRollup:$("#hndIsRollup").val()==1}}function onSelect_submitEmployeeSearch(n){var t=n.item[0].innerText;submitSelectedEmpID=t.split("-")[0].trim();submitPageNo=1;submitGridDataBound()}function submitGridDataBound(){var n=$("#grdSubmitReportees").data("kendoGrid"),i=n.dataSource._data.length,t;$("#recordCount").text(i);var r=submitSelectedEmpID==null?0:1,f=n.dataSource.view().length>0?n.dataSource.view()[0]:null,u=n.dataSource.view();n.element.find(".k-grid-content").animate({scrollTop:0},400);n.dataSource._data.length==0&&(submitSelectedEmpID=null,$("#submitChkAll").hide(),t=$("#grdSubmitReportees").find("th").length,$("#grdSubmitReportees").find("tbody").append('<tr class="kendo-data-row"><td colspan="'+t+'" style="text-align:left;background-color:#6686C4;padding-top:30px"><\/td><\/tr>'),$("#grdSubmitReportees").find(".k-grid-content tbody tr td").css("padding-top",11).append('<b style="padding-left:100px;background-color:#6686C4 !important;color:white !important;">No Results Found!<\/b>'));$.each(u,function(t,i){if(submitSelectedEmpID!=null&&i.EmployeeID==submitSelectedEmpID){submitSelectedEmpID=null;previousUid!=null&&n.tbody.find("tr[data-uid="+previousUid+"]")!=undefined&&n.tbody.find("tr[data-uid="+previousUid+"]").removeClass("selected");previousUid=i.uid;n.tbody.find("tr[data-uid="+i.uid+"]").addClass("selected");$("#grdSubmitReportees .k-grid-content-locked").find("tr").eq(t).addClass("selected");var r=n.element.find("tbody").offset().top,u=n.tbody.find("tr[data-uid="+i.uid+"]").offset().top,f=u-r;n.element.find(".k-grid-content").animate({scrollTop:f},400)}});submitSelectedEmpID!=null&&(submitPageNo+=1);r==0&&$("#submitChkAll")[0].checked==!1&&$("#submitChkAll").click()}function submitSelectedEmployees(n){var t,i;objChangeFlag=!1;var f=eval($("#hndSelectedManagerNum").val()),e=$("#hndMenuType").val(),o=$("#hndIsRollup").val()==1,r=$("#grdSubmitReportees").data("kendoGrid"),u=[],s=r.dataSource._data.length;for(t=0;t<s;t++)i=r.dataSource._data[t],i.SubmitIsChecked==!0&&u.push(i);var h=JSON.stringify(u),c=JSON.parse(h),l=$('input[name="__RequestVerificationToken"]').val();$.ajax({url:"../Compensation/CompApproval",type:"Post",cache:!1,data:{__RequestVerificationToken:l,selectedRows:c,selectedManagerNum:f,MenuType:e,isRollup:o,approvalStatus:1,comment:n},success:function(){refreshGridTreeChange();$("#divSubmitPopup").modal("hide");Successmessage("Submitted Successfully");var n=$("#ReporteeGrid .k-grid-content").find("tr");n.length>0&&$(n[0]).find("input")[1]!=undefined&&window.setTimeout(function(){$(n[0]).find("input")[1].focus()},50)}})}function chartClick(){triggerSaveEvent();BindBudgetData();objChangeFlag=!1}function triggerSaveEvent(){if(objChangeFlag==!0){objChangeFlag=!1;var n=$("#ReporteeGrid").data("kendoGrid");n.dataSource.unbind("sync");n.dataSource.bind("sync",grdMeritReportees_sync);n.dataSource.sync()}objChangeFlag=!1}function showCommentImage(n,t,i){return t==0?"<img src='../../Images/cmt-blank.png'><\/img>":i==0?"<img src='../../Images/cmt-read.png'><\/img>":"<img src='../../Images/cmt-unread.png'><\/img>"}function showStatusImage(n,t){var i="";switch(n){case"Approved":i="<img src='../../Images/MeritStatus/approved-icon.png' title='"+t+"'><\/img>";break;case"Reopen":i="<img src='../../Images/MeritStatus/rejected-icon.png' title='"+t+"'><\/img>";break;case"ActionRequired":i="<img src='../../Images/MeritStatus/action-req1.png' title='"+t+"'><\/img>";break;case"Submitted":i="<img src='../../Images/MeritStatus/inprogress-icon.png' title='"+t+"'><\/img>";break;case"InProgress":i="<img src='../../Images/MeritStatus/yet-to-start.png' title='"+t+"'><\/img>"}return i}function disableControls(n){n&&($("#btnPromotionPopupOk").attr("disabled",!0).addClass("k-state-disabled"),$("#textboxPromotion").attr("disabled",!0).addClass("k-state-disabled"),$("#promotionComment").attr("disabled",!0).addClass("k-state-disabled"),$("#btnPromotionRefresh").attr("disabled",!0).addClass("k-state-disabled"),$("#btnPromotionRevert").attr("disabled",!0).addClass("k-state-disabled"),$("[id$=btnDelete],[id*=btnDelete],[id$=btnPromotionEdit],[id*=btnPromotionEdit]").attr("disabled",!0).addClass("k-state-disabled"))}function select(n){n.item[0].innerText!="Show in USD"&&n.item[0].innerText!="Show in Local"&&(n._defaultPrevented=!showSaveWarning(n))}function displayUSD(){setDisplayForddlActions("USD","Block");setDisplayForddlActions("Local","None")}function displayLocal(){setDisplayForddlActions("USD","None");setDisplayForddlActions("Local","Block")}function setDisplayForddlActions(n,t){$("#ddlActions_listbox .k-item").filter(function(){return $.text([this]).indexOf(n)>-1}).each(function(){this.style.display=t})}function ddlActionsDataBound(){$("#ddlActions_listbox .k-item")[0].style.display="None";$("#ddlActions_listbox .k-item")[2].style.display="None";$("#ddlActions_listbox .k-item")[3].style.display="None";RuleConfiguration.FeatureConfigurationMultiCurrencyDisplay?displayUSD():(setDisplayForddlActions("USD","None"),setDisplayForddlActions("Local","None"))}function OnselectTypeChange(){var f=$("#ddlActions").data("kendoDropDownList").dataItem($("#ddlActions").data("kendoDropDownList").select()),r=this.dataItem(),n=r.Value,u=$("#ddlActions").data("kendoDropDownList"),i,t;n==filterValue?($("body").css("overflow","hidden"),$.ajax({url:"../Compensation/_FilterSort",type:"Get",cache:!1,async:!0,dataType:"html",success:function(n){$("#wndFilterSort").html(n);var t=$("#wndFilterSort").data("kendoWindow");t.options.gridName="ReporteeGrid";t.center().open()}})):n==clearFilterValue?(clearFilterSort(),$("#ddlActions_listbox .k-item")[2].style.display="None",refreshGrid()):n==exportValue?(i=$("#hndSelectedManagerNum").val(),window.location.href="../Compensation/_ExportData?managerNum="+i+"&loggedInEmployeeNum=@Model.CompensationTypeConfiguration.LoggedInEmployeeNum&compMenuType=@Model.CompMenuType"):n==managerActionTypeUSD?(t=$("#ReporteeGrid").data("kendoGrid"),GridDisplay=n,t.refresh(),displayLocal()):n==managerActionTypeLocal&&(GridDisplay=n,t=$("#ReporteeGrid").data("kendoGrid"),t.refresh(),displayUSD());u.select(0)}function addFilterSort(){var n=document.createElement("option"),i=$("#ddlColumns").val(),r=$("#ddlColumns").data("kendoDropDownList").text(),t=$("#ddlOperations").val(),f=$("#ddlOperations").data("kendoDropDownList").text(),u=columnValue=="WorkFlow"?$("#ddlValues").val():$("#txtSearch").val();t=="asc"||t=="desc"?(n.text=r+" -> "+t,n.value=i+"|"+t,$("#lstSorts").append(n)):(n.text=r+" -> "+f+" -> "+u,n.value=i+"|"+t+"|"+u,$("#lstFilters").append(n))}function clearFilterSort(){var r=$("#divFilterSort").closest(".k-window-content").data("kendoWindow"),u=r.options.gridName,n=$("#"+u).data("kendoGrid"),t,i;$("#lstSorts").empty();$("#lstFilters").empty();$("#ddlColumns").data("kendoDropDownList")!=undefined?$("#ddlColumns").data("kendoDropDownList").value(null):"";$("#ddlOperations").data("kendoDropDownList")!=undefined?$("#ddlOperations").data("kendoDropDownList").value(null):"";$("#txtSearch").val("");$("#btnAddToList").prop("disabled",!($("#lstFilters option").length>0||$("#lstSorts option").length>0));t=0;i=0;n.pager!=undefined&&(t=n.pager.dataSource._pageSize,gridGroup=n.pager.dataSource._group);n.dataSource.query({page:1,pageSize:t,filter:[],sort:[],group:i})}function showOrHideOperations(n,t){var i=$("[id='ddlOperations_listbox']").last().find(".k-item");t=="WorkFlow"?(i[1].style.display="none",i[2].style.display="none",i[3].style.display="none",i[4].style.display="none",i[5].style.display="none",i[6].style.display="block",i[7].style.display="none",i[8].style.display="none",i[9].style.display="none",i[10].style.display="none",i[11].style.display="none"):n=="string"?(i[1].style.display="block",i[2].style.display="block",i[3].style.display="block",i[4].style.display="block",i[5].style.display="block",i[6].style.display="none",i[7].style.display="none",i[8].style.display="none",i[9].style.display="none",i[10].style.display="none",i[11].style.display="none"):(i[1].style.display="block",i[2].style.display="block",i[3].style.display="none",i[4].style.display="none",i[5].style.display="none",i[6].style.display="block",i[7].style.display="block",i[8].style.display="block",i[9].style.display="block",i[10].style.display="block",i[11].style.display="block")}function CopensationClosePopup(){var n=$("#lstFilters").text(),t=$("#lstSorts").text(),i=$("#ddlColumns").data("kendoDropDownList").value();ddlChanged=i!=""||n!=""||t!=""?!0:!1}var GridDisplay="Local",preferredCulture="en-US",ddlCurrencyCulture="en-US",ddlExchangeRate=1,pageChanged=!1,pageno=1,MeritAmtLocal,MeritPCT,MeritAmtUSD,LumpSumAmtUSD,changeType,readOnly=!1,ddlCurrencyCodeNum,isSubmitChecked=!1,isApproveChecked=!1,inputChanged=!1,defaultTools=kendo.ui.Editor.defaultTools,OpenCommentPopUp,BindBudgetData,OpenMeritMandateCommentPopUp,approvalSelectedEmpID,approvalPageNo,reopenSelectedEmpID,reopenPageNo,submitSelectedEmpID,submitPageNo,ClearChangeFlag,saveWarning;defaultTools.insertLineBreak.options.shift=!1;delete defaultTools.insertParagraph.options;var isMyApproval,isApprovalLevel=!1,isTopLevelManager=!1,lastEditedCommentNum=0,isRollUpEnabled,isDirectEnabled,inputChanged,totalCurrentSalary,totalNewSalary,approveVisiblity=!1,submitVisiblity=!0,revertRowIndex=null,revertMeritPct=null,revertMeritlocalAmt=null,revertMeritUSDAmt=null,revertRowData=null,revertRow=null,previousUid=null,objChangeFlag,BudgetPercentage;$(document).ready(function(){isDirectSelected=!0;isRollUpEnabled=!0});$(document).on("click","#btnMeritMandateSave",function(){var r=$("#CommentPopup").data("kendoWindow").options.readOnly,t,i;if(r)return!1;var n=$("#CommentPopup").closest(".k-window-content").data("kendoWindow").options.Values,u=$("#meritcomment").val();return $("#meritcomment").val().trim()==""?!1:u.length>2e3?(showAlert("Comment should not exceed the character limit"),!1):(n=n!=undefined?n:revertRowIndex,revertRowData=null,revertRow=null,revertRowIndex=null,revertMeritPct=null,revertMeritlocalAmt=null,revertMeritUSDAmt=null,t=$("#CommentPopup").data("kendoWindow").options.rowData,i=$("#CommentPopup").data("kendoWindow").options.row,t.TotalCommentsCount=t.TotalCommentsCount+1,calculateMeritAmt(t,n,i),!0)});$(document).on("hide.bs.modal","#divPromotion",function(n){if(!isPopupEdited){if(!showSaveWarning(n,"inputChanged"))return!1;ClearCommentChangeFlag()}isPopupEdited=!1});$(document).on("hide.bs.modal","#divMeritComment",function(){var t=$("#ReporteeGrid").data("kendoGrid"),n=t._data[revertRowIndex];n!=undefined&&(n.MeritPCT=revertMeritPct,n.MeritAmtLocal=revertMeritlocalAmt,n.MeritAmtUSD=revertMeritUSDAmt,refreshRow(t,revertRow),revertRowIndex=null,revertRow=null)});$(document).on("hide.bs.modal","#divComment",function(){var n,t,i,r;isPopupEdited||(n=$("#CommentPopup").data("kendoWindow").options.rowData,t=$("#CommentPopup").data("kendoWindow").options.row,CommentPageTypeConstants.PageType==CommentPageTypeConstants.meritMandate?(i=CommentPageTypeConstants.rowIndex,rollbackMeritPct(n,i,t)):CommentPageTypeConstants.PageType==CommentPageTypeConstants.generalComment&&(r=$("#ReporteeGrid").data("kendoGrid"),n.TotalUnReadComment=0,refreshRow(r,t)),ClearCommentChangeFlag());isPopupEdited=!1});$(document).on("change","#selectedRollupChk",function(){$(this).is(":checked")?($("#hndIsSelectedRollup").val(1),BindBudgetData(),$(this).checked=!0):($("#hndIsSelectedRollup").val(0),BindBudgetData())});$(document).on("click","#btnDirect",function(){$("#btnRollUp").removeClass("bg-yellow-lemon selected");$("#btnRollUp").addClass("bg-white");$("#btnDirect").removeClass("bg-white");$("#btnDirect").addClass("bg-yellow-lemon selected");$("#hndIsSelectedRollup").val(0);BindBudgetData()});$(document).on("click","#DirectBudget",function(){$("#hndIsSelectedRollup").val(0);BindBudgetData()});$(document).on("click","#DirectIndirect",function(){$("#hndIsSelectedRollup").val(1);BindBudgetData()});$(document).on("click","#btnRollUp",function(){$("#btnDirect").removeClass("bg-yellow-lemon selected");$("#btnDirect").addClass("bg-white");$("#btnRollUp").removeClass("bg-white");$("#btnRollUp").addClass("bg-yellow-lemon selected");$("#hndIsSelectedRollup").val(1);BindBudgetData()});$(document).on("click","[id$=EmployeeName]",function(){var t=$("#ReporteeGrid").data("kendoGrid"),r=$(this).closest("tr").index(),i=$(this).closest("tr"),n=t.dataItem(i);CallEmployeeNameClick(n.EmployeeNum,n.EmployeeName)});$(document).on("change","[id*=ddlMeritPerfRating]",function(){for(var r=$("#ReporteeGrid").data("kendoGrid"),u=$(this).closest("tr").index(),i=$(this).closest("tr"),n=r.dataItem(i),e=$("#ddlMeritPerfRating_"+n.Empjobnum).data("kendoDropDownList").dataItem($("#ddlMeritPerfRating_"+n.Empjobnum).data("kendoDropDownList").select()),f,t=0;t<RatingRange.length;t++)RatingRange[t].Value==e.Value&&(f=RatingRange[t].Text);ChangeMeritPerfRating(n,i,u,f);checkMeritGuideLine(n,u);refreshRow(r,i);rollUpDirectDisabled()});$(document).on("click","[id$=lnkNewTitle]",function(){var t=$("#ReporteeGrid").data("kendoGrid"),i=$(this).closest("tr").index(),n=$(this).closest("tr"),r=t.dataItem(n);CallGradeClick(r,n,i)});$(document).on("click","[id$=lnkComment]",function(){var i=$("#ReporteeGrid").data("kendoGrid"),r=$(this).closest("tr").index(),n,t;$("#CommentPopup").closest(".k-window-content").data("kendoWindow").options.Values=r;n=$(this).closest("tr");t=i.dataItem(n);CallCommentClick(t,n)});$(document).on("keydown","#txtSearch",function(n){var i=$("#ddlColumns").data("kendoDropDownList").dataItem($("#ddlColumns").data("kendoDropDownList").select()),t=i.Value;if(t=="BaseSalaryLocal"||t=="BaseSalaryUSD"||t=="CurrentAnnualizedSalaryLocal"||t=="CurrentAnnualizedSalaryUSD"||t=="HrlySalaryLocal"||t=="HrlySalaryUSD"||t=="ProRation"||t=="ProRatedPCT"||t=="ProRatedAmtLocal"||t=="ProRatedAmtUSD"||t=="HrlyProRatedAmtLocal"||t=="HrlyProRatedAmtUSD"||t=="CountryBudgetLocal"||t=="CountryBudgetUSD"||t=="BudgetLocal"||t=="BudgetUSD"||t=="BudgetPCT"||t=="MeritPCT"||t=="MeritAmtLocal"||t=="MeritAmtUSD"||t=="HrlyMeritAmtLocal"||t=="HrlyMeritAmtUSD"||t=="PromotionPct"||t=="PromotionAmtLocal"||t=="PromotionAmtUSD"||t=="AdjustmentPct"||t=="AdjustmentAmtLocal"||t=="AdjustmentAmtUSD"||t=="NewSalaryLocal"||t=="NewSalaryUSD"||t=="HrlyNewSalaryLocal"||t=="HrlyNewSalaryUSD"||t=="NewCompaRatio"||t=="BonusTargetLocal"||t=="BonusTargetUSD"||t=="BonusPCT"||t=="BonusAMTLocal"||t=="BonusAMTUSD"||t=="TCCLocal"||t=="TCCUSD"||t=="LumpSumPct"||t=="LumpSumAmtLocal"||t=="LumpSumAmtUSD"||t=="HrlyPromotionAmtLocal"||t=="HrlyPromotionAmtUSD"||t=="HrlyAdjustmentAmtLocal"||t=="HrlyAdjustmentAmtUSD"||t=="HrlyLumpSumAmtLocal"||t=="HrlyLumpSumAmtUSD"||t=="MktMinLocal"||t=="MktMinUSD"||t=="MktMidLocal"||t=="MktMidUSD"||t=="MktMaxLocal"||t=="MktMaxUSD"||t=="NewMktMinLocal"||t=="NewMktMinUSD"||t=="NewMktMidLocal"||t=="NewMktMidUSD"||t=="NewMktMaxLocal"||t=="NewMktMaxUSD"||t=="HrlyNewMktMinLocal"||t=="HrlyNewMktMinUSD"||t=="HrlyNewMktMidLocal"||t=="HrlyNewMktMidUSD"||t=="HrlyNewMktMaxLocal"||t=="HrlyNewMktMaxUSD"||t=="HrlyMktMinLocal"||t=="HrlyMktMinUSD"||t=="HrlyMktMidLocal"||t=="HrlyMktMidUSD"||t=="HrlyMktMaxLocal"||t=="HrlyMktMaxUSD"){var r=preferredCulture,u=kendo.cultures[r],f=u.numberFormat["."];allowDecimalNumberOnlyInput(n,f,n.target)}});$(document).on("keydown","[id$=txtMeritPCT]",function(n){var t;triggerEnterEvent=!0;var i=$("#ReporteeGrid").data("kendoGrid"),e=$(this).closest("tr").index(),r=$(this).closest("tr"),o=i.dataItem(r),u=kendo.cultures[preferredCulture],f=u.numberFormat["."];return allowDecimalNumberOnlyInput(n,f,n.target),t=n.keycode||n.which,t==13||t==9?($(this).trigger("change"),!1):void 0});$(document).on("change","[id$=txtMeritPCT]",function(n){if(triggerEnterEvent==!0){var r=$("#ReporteeGrid").data("kendoGrid"),u=$("#ddlLocalCurrencies").data("kendoDropDownList").dataItem($("#ddlLocalCurrencies").data("kendoDropDownList").select()),f=$(this).closest("tr").index(),i=$(this).closest("tr"),t=r.dataItem(i);MeritPCT=t.MeritPCT;MeritAmtLocal=t.MeritAmtLocal;MeritAmtUSD=t.EmployeeStatus.toLowerCase()=="annual"?roundingRule(MeritAmtLocal/t.MeritExchangeRate*u.ExchangeRate,"general","annual"):roundingRule(MeritAmtLocal/t.MeritExchangeRate*u.ExchangeRate,"general","hourly");revertRowData=t;revertRow=i;revertRowIndex=f;revertMeritPct=MeritPCT;revertMeritlocalAmt=MeritAmtLocal;revertMeritUSDAmt=MeritAmtUSD;calculateForMeritPct(t,this.value,f,i)||(t.MeritPCT=MeritPCT,t.MeritAmtLocal=MeritAmtLocal,t.MeritAmtUSD=MeritAmtUSD,refreshRow(r,i));n.isTrigger!=undefined&&(triggerEnterEvent=!1)}rollUpDirectDisabled();rebindOfTotalSpentSummary()});$(document).on("contextmenu","[id$=txtMeritPCT],[id$=txtMeritAmtLocal],[id$=txtMeritAmtUSD],[id$=txtPromotionPctLocal],[id$=txtPromotionAmtLocal],[id$=txtPromotionPctUSD],[id$=txtPromotionAmtUSD],[id$=txtAdjustmentPct],[id$=txtAdjustmentAmtLocal],[id$=txtAdjustmentAmtUSD],[id$=txtBonusPCT],[id$=txtLumpSumPct],[id$=txtLumpSumAmtLocal],[id$=txtLumpSumAmtUSD],[id$=txtBonusPCT]",function(){return!1});$(document).on("hover",".proration",function(){var n=$("#ReporteeGrid").data("kendoGrid"),i=$(this).closest("tr").index(),t=$(this).closest("tr"),r=n.dataItem(t);$(this).kendoTooltip({autoHide:!0,content:"Increase amount is prorated and rounded to the "+RuleConfiguration.GeneralConfigurationRoundingMeritAnnual+" "+RuleConfiguration.GeneralConfigurationDecimalMeritAnnual})});$(document).on("hover",".mktMinLocal",function(){var n=$("#ReporteeGrid").data("kendoGrid"),i=$(this).closest("tr").index(),t=$(this).closest("tr"),r=n.dataItem(t);$(this).kendoTooltip({autoHide:!0,content:"Market Min will be used for calculating the Merit Increase"})});$(document).on("hover",".mktMinUSD",function(){var n=$("#ReporteeGrid").data("kendoGrid"),i=$(this).closest("tr").index(),t=$(this).closest("tr"),r=n.dataItem(t);$(this).kendoTooltip({autoHide:!0,content:"Market Min will be used for calculating the Merit Increase"})});$(document).on("hover","#ProRationId",function(){var t=$("#ReporteeGrid").data("kendoGrid"),f=$(this).closest("tr").index(),i=$(this).closest("tr"),r=t.dataItem(i),n=r.ProRation,u=n==null?"Proration value 0.00000":"Proration value "+n.toFixed(5);$(this).kendoTooltip({autoHide:!0,content:u})});$(document).on("hover","[id$=txtNewSalaryLocal]",function(){var n=$("#ReporteeGrid").data("kendoGrid"),r=$(this).closest("tr").index(),t=$(this).closest("tr"),i=n.dataItem(t);i.NewSalaryLocal!=null&&$(this).kendoTooltip({autoHide:!0,content:"New Salary is rounded to the "+RuleConfiguration.GeneralConfigurationRoundingNewSalaryAnnual+" "+RuleConfiguration.GeneralConfigurationDecimalNewSalaryAnnual})});$(document).on("hover","[id$=txtNewSalaryUSD]",function(){var n=$("#ReporteeGrid").data("kendoGrid"),r=$(this).closest("tr").index(),t=$(this).closest("tr"),i=n.dataItem(t);i.NewSalaryUSD!=null&&$(this).kendoTooltip({autoHide:!0,content:"New Salary is rounded to the Absolute 1"})});$(document).on("keydown","[id$=txtMeritAmtLocal]",function(n){var t;triggerEnterEvent=!0;var i=$("#ReporteeGrid").data("kendoGrid"),s=$(this).closest("tr").index(),r=$(this).closest("tr"),u=i.dataItem(r),f=RuleConfiguration.FeatureConfigurationMultiCurrency?u.CultureCode:preferredCulture,e=kendo.cultures[f],o=e.numberFormat["."];return allowDecimalNumberOnlyInputAmt(n,o),t=n.keycode||n.which,t==13||t==9?($(this).trigger("change"),!1):void 0});$(document).on("change","[id$=txtMeritAmtLocal]",function(n){if(triggerEnterEvent==!0){var r=$("#ReporteeGrid").data("kendoGrid"),u=$(this).closest("tr").index(),i=$(this).closest("tr"),t=r.dataItem(i);MeritPCT=t.MeritPCT;MeritAmtLocal=t.MeritAmtLocal;MeritAmtUSD=t.MeritAmtUSD;revertRowData=t;revertRow=i;revertRowIndex=u;revertMeritPct=MeritPCT;revertMeritlocalAmt=MeritAmtLocal;revertMeritUSDAmt=MeritAmtUSD;CalculateMeritAmtLocal(t,this.value,u,i)||(t.MeritPCT=MeritPCT,t.MeritAmtLocal=MeritAmtLocal,t.MeritAmtUSD=MeritAmtUSD,refreshRow(r,i));n.isTrigger!=undefined&&(triggerEnterEvent=!1)}});$(document).on("keydown","[id$=txtMeritAmtUSD]",function(n){var t;triggerEnterEvent=!0;var i=$("#ReporteeGrid").data("kendoGrid"),s=$(this).closest("tr").index(),r=$(this).closest("tr"),u=i.dataItem(r),f=RuleConfiguration.FeatureConfigurationMultiCurrency?u.CultureCode:preferredCulture,e=kendo.cultures[f],o=e.numberFormat["."];return allowDecimalNumberOnlyInputAmt(n,o),t=n.keycode||n.which,t==13||t==9?($(this).trigger("change"),!1):void 0});$(document).on("change","[id$=txtMeritAmtUSD]",function(n){if(triggerEnterEvent==!0){var r=$("#ReporteeGrid").data("kendoGrid"),u=$(this).closest("tr").index(),i=$(this).closest("tr"),t=r.dataItem(i);MeritPCT=t.MeritPCT;MeritAmtLocal=t.MeritAmtLocal;MeritAmtUSD=t.MeritAmtUSD;revertRowData=t;revertRow=i;revertRowIndex=u;revertMeritPct=MeritPCT;revertMeritlocalAmt=MeritAmtLocal;revertMeritUSDAmt=MeritAmtUSD;CalculateMeritAmtUSD(t,this.value,u,i)||(t.MeritPCT=MeritPCT,t.MeritAmtLocal=MeritAmtLocal,t.MeritAmtUSD=MeritAmtUSD,refreshRow(r,i));n.isTrigger!=undefined&&(triggerEnterEvent=!1)}});$(document).on("keydown","[id$=txtPromotionPctLocal]",function(n){var t;triggerEnterEvent=!0;var i=$("#ReporteeGrid").data("kendoGrid"),e=$(this).closest("tr").index(),r=$(this).closest("tr"),o=i.dataItem(r),u=kendo.cultures[preferredCulture],f=u.numberFormat["."];return allowDecimalNumberOnlyInput(n,f,n.target),t=n.keycode||n.which,t==13||t==9?($(this).trigger("change"),!1):void 0});$(document).on("change","[id$=txtPromotionPctLocal]",function(n){var i=$("#ReporteeGrid").data("kendoGrid"),u=$(this).closest("tr").index(),t=$(this).closest("tr"),r=i.dataItem(t);CalculatePromotionPCT(r,this.value,t);refreshRow(i,t);n.isTrigger!=undefined&&(triggerEnterEvent=!1)});$(document).on("keydown","[id$=txtPromotionPctUSD]",function(n){var t;triggerEnterEvent=!0;var i=$("#ReporteeGrid").data("kendoGrid"),e=$(this).closest("tr").index(),r=$(this).closest("tr"),o=i.dataItem(r),u=kendo.cultures[preferredCulture],f=u.numberFormat["."];return allowDecimalNumberOnlyInput(n,f,n.target),t=n.keycode||n.which,t==13||t==9?($(this).trigger("change"),!1):void 0});$(document).on("change","[id$=txtPromotionPctUSD]",function(n){var i=$("#ReporteeGrid").data("kendoGrid"),u=$(this).closest("tr").index(),t=$(this).closest("tr"),r=i.dataItem(t);CalculatePromotionPCT(r,this.value,t);refreshRow(i,t);n.isTrigger!=undefined&&(triggerEnterEvent=!1)});$(document).on("keydown","[id$=txtPromotionAmtLocal]",function(n){var t;triggerEnterEvent=!0;var i=$("#ReporteeGrid").data("kendoGrid"),s=$(this).closest("tr").index(),r=$(this).closest("tr"),u=i.dataItem(r),f=RuleConfiguration.FeatureConfigurationMultiCurrency?u.CultureCode:preferredCulture,e=kendo.cultures[f],o=e.numberFormat["."];return allowDecimalNumberOnlyInputAmt(n,o),t=n.keycode||n.which,t==13||t==9?($(this).trigger("change"),!1):void 0});$(document).on("change","[id$=txtPromotionAmtLocal]",function(n){var i=$("#ReporteeGrid").data("kendoGrid"),u=$(this).closest("tr").index(),t=$(this).closest("tr"),r=i.dataItem(t);CalculatePromotionAmtLocal(r,this.value,t);refreshRow(i,t);n.isTrigger!=undefined&&(triggerEnterEvent=!1)});$(document).on("keydown","[id$=txtPromotionAmtUSD]",function(n){var t;triggerEnterEvent=!0;var i=$("#ReporteeGrid").data("kendoGrid"),s=$(this).closest("tr").index(),r=$(this).closest("tr"),u=i.dataItem(r),f=RuleConfiguration.FeatureConfigurationMultiCurrency?u.CultureCode:preferredCulture,e=kendo.cultures[f],o=e.numberFormat["."];return allowDecimalNumberOnlyInputAmt(n,o),t=n.keycode||n.which,t==13||t==9?($(this).trigger("change"),!1):void 0});$(document).on("change","[id$=txtPromotionAmtUSD]",function(n){var i=$("#ReporteeGrid").data("kendoGrid"),u=$(this).closest("tr").index(),t=$(this).closest("tr"),r=i.dataItem(t);CalculatePromotionAmtUSD(r,this.value,t);refreshRow(i,t);n.isTrigger!=undefined&&(triggerEnterEvent=!1)});$(document).on("keydown","[id$=txtAdjustmentPct]",function(n){var t;triggerEnterEvent=!0;var i=$("#ReporteeGrid").data("kendoGrid"),e=$(this).closest("tr").index(),r=$(this).closest("tr"),o=i.dataItem(r),u=kendo.cultures[preferredCulture],f=u.numberFormat["."];return allowDecimalNumberOnlyInput(n,f,n.target),t=n.keycode||n.which,t==13||t==9?($(this).trigger("change"),!1):void 0});$(document).on("keydown","[id$=txtBonusPct]",function(n){var t;triggerEnterEvent=!0;var i=$("#ReporteeGrid").data("kendoGrid"),e=$(this).closest("tr").index(),r=$(this).closest("tr"),o=i.dataItem(r),u=kendo.cultures[preferredCulture],f=u.numberFormat["."];return allowDecimalNumberOnlyInput(n,f,n.target),t=n.keycode||n.which,t==13||t==9?($(this).trigger("change"),!1):void 0});$(document).on("change","[id$=txtAdjustmentPct]",function(n){var i=$("#ReporteeGrid").data("kendoGrid"),u=$(this).closest("tr").index(),t=$(this).closest("tr"),r=i.dataItem(t);CalculateAdjustmentPCT(r,this.value,t);refreshRow(i,t);n.isTrigger!=undefined&&(triggerEnterEvent=!1)});$(document).on("change","[id$=txtBonusPct]",function(n){var i=$("#ReporteeGrid").data("kendoGrid"),u=$(this).closest("tr").index(),t=$(this).closest("tr"),r=i.dataItem(t);CalculateBonusPCT(r,this.value,t);refreshRow(i,t);n.isTrigger!=undefined&&(triggerEnterEvent=!1)});$(document).on("keydown","[id$=txtAdjustmentAmtLocal]",function(n){var t;triggerEnterEvent=!0;var i=$("#ReporteeGrid").data("kendoGrid"),s=$(this).closest("tr").index(),r=$(this).closest("tr"),u=i.dataItem(r),f=RuleConfiguration.FeatureConfigurationMultiCurrency?u.CultureCode:preferredCulture,e=kendo.cultures[f],o=e.numberFormat["."];return allowDecimalNumberOnlyInputAmt(n,o),t=n.keycode||n.which,t==13||t==9?($(this).trigger("change"),!1):void 0});$(document).on("keydown","[id$=txtBonusAmt]",function(n){var t;triggerEnterEvent=!0;var i=$("#ReporteeGrid").data("kendoGrid"),s=$(this).closest("tr").index(),r=$(this).closest("tr"),u=i.dataItem(r),f=RuleConfiguration.FeatureConfigurationMultiCurrency?u.CultureCode:preferredCulture,e=kendo.cultures[f],o=e.numberFormat["."];return allowDecimalNumberOnlyInputAmt(n,o),t=n.keycode||n.which,t==13||t==9?($(this).trigger("change"),!1):void 0});$(document).on("change","[id$=txtAdjustmentAmtLocal]",function(n){var i=$("#ReporteeGrid").data("kendoGrid"),u=$(this).closest("tr").index(),t=$(this).closest("tr"),r=i.dataItem(t);CalculateAdjustmentAmtLocal(r,this.value,t);refreshRow(i,t);n.isTrigger!=undefined&&(triggerEnterEvent=!1)});$(document).on("change","[id$=txtBonusAmt]",function(n){var i=$("#ReporteeGrid").data("kendoGrid"),u=$(this).closest("tr").index(),t=$(this).closest("tr"),r=i.dataItem(t);CalculateBonusAmt(r,this.value,t);refreshRow(i,t);n.isTrigger!=undefined&&(triggerEnterEvent=!1)});$(document).on("keydown","[id$=txtAdjustmentAmtUSD]",function(n){var t;triggerEnterEvent=!0;var i=$("#ReporteeGrid").data("kendoGrid"),s=$(this).closest("tr").index(),r=$(this).closest("tr"),u=i.dataItem(r),f=RuleConfiguration.FeatureConfigurationMultiCurrency?u.CultureCode:preferredCulture,e=kendo.cultures[f],o=e.numberFormat["."];return allowDecimalNumberOnlyInputAmt(n,o),t=n.keycode||n.which,t==13||t==9?($(this).trigger("change"),!1):void 0});$(document).on("change","[id$=txtAdjustmentAmtUSD]",function(n){var i=$("#ReporteeGrid").data("kendoGrid"),u=$(this).closest("tr").index(),t=$(this).closest("tr"),r=i.dataItem(t);CalculateAdjustmentAmtUSD(r,this.value,t);refreshRow(i,t);n.isTrigger!=undefined&&(triggerEnterEvent=!1)});$(document).on("keydown","[id$=txtLumpSumPct]",function(n){var t;triggerEnterEvent=!0;var i=$("#ReporteeGrid").data("kendoGrid"),e=$(this).closest("tr").index(),r=$(this).closest("tr"),o=i.dataItem(r),u=kendo.cultures[preferredCulture],f=u.numberFormat["."];return allowDecimalNumberOnlyInput(n,f,n.target),t=n.keycode||n.which,t==13||t==9?($(this).trigger("change"),!1):void 0});$(document).on("change","[id$=txtLumpSumPct]",function(n){var i=$("#ReporteeGrid").data("kendoGrid"),u=$(this).closest("tr").index(),t=$(this).closest("tr"),r=i.dataItem(t);CalculateLumpSumPCT(r,this.value,t);refreshRow(i,t);n.isTrigger!=undefined&&(triggerEnterEvent=!1)});$(document).on("keydown","[id$=txtLumpSumAmtLocal]",function(n){var t;triggerEnterEvent=!0;var i=$("#ReporteeGrid").data("kendoGrid"),s=$(this).closest("tr").index(),r=$(this).closest("tr"),u=i.dataItem(r),f=RuleConfiguration.FeatureConfigurationMultiCurrency?u.CultureCode:preferredCulture,e=kendo.cultures[f],o=e.numberFormat["."];return allowDecimalNumberOnlyInputAmt(n,o),t=n.keycode||n.which,t==13||t==9?($(this).trigger("change"),!1):void 0});$(document).on("change","[id$=txtLumpSumAmtLocal]",function(n){var i=$("#ReporteeGrid").data("kendoGrid"),u=$(this).closest("tr").index(),t=$(this).closest("tr"),r=i.dataItem(t);CalculateLumpSumAmtLocal(r,this.value,t);refreshRow(i,t);n.isTrigger!=undefined&&(triggerEnterEvent=!1)});$(document).on("keydown","[id$=txtLumpSumAmtUSD]",function(n){var t;triggerEnterEvent=!0;var i=$("#ReporteeGrid").data("kendoGrid"),e=$(this).closest("tr").index(),r=$(this).closest("tr"),o=i.dataItem(r),u=kendo.cultures[preferredCulture],f=u.numberFormat["."];return allowDecimalNumberOnlyInputAmt(n,f),t=n.keycode||n.which,t==13||t==9?($(this).trigger("change"),!1):void 0});$(document).on("change","[id$=txtLumpSumAmtUSD]",function(n){var i=$("#ReporteeGrid").data("kendoGrid"),u=$(this).closest("tr").index(),t=$(this).closest("tr"),r=i.dataItem(t);CalculateLumpSumAmtUSD(r,this.value,t);refreshRow(i,t);n.isTrigger!=undefined&&(triggerEnterEvent=!1)});$(document).on("click","#btnCompensationSave",function(){triggerSaveEvent();rollUpDirectEnabled();Successmessage("Saved Successfully");objChangeFlag=!1});$(document).on("click","#menureanalytic,#home,#menuworkforce,#menuexchangerate,#menumanageuser,#menurules,#menubudget,#menucommunication,#menuworkflow,#menurating,#menucustomizeview,#menurecommendincrease",function(n){if(!showSaveWarning(n,"objChangeFlag"))return n._defaultPrevented=!0,!1});OpenCommentPopUp=function(n,t,i){i=="Merit"&&(i=ReporteesPageConstatns.meritmandateType);i=="Adjustment"&&(i=ReporteesPageConstatns.adjustmentType);var r=$("#CommentPopup").data("kendoWindow"),u=$('input[name="__RequestVerificationToken"]').val();r.options.rowData=n;r.options.row=t;$.ajax({url:"../Comment/_Comment",type:"Post",cache:!1,data:{__RequestVerificationToken:u,empJobNum:n.Empjobnum,commentType:i},success:function(t){$("#divComment").html(t);$("#divComment").modal("show");$("#divComment #divCommentTitle").text("Enter comment for "+n.EmployeeName)}})};saveWarning=function(){return objChangeFlag==!0&&confirm(meritPageConstants.warningMessage)?!1:(ClearChangeFlag(),!0)};BindBudgetData=function(){function n(n,t,i){var e,f,o,r,u;return n==null?"":isNaN(n)?"":(e=$("#ddlLocalCurrencies").data("kendoDropDownList").dataItem($("#ddlLocalCurrencies").data("kendoDropDownList").select()),f=kendo.cultures[i],f=f!=undefined?f.numberFormat.currency.symbol:kendo.cultures["en-US"].numberFormat.currency.symbol,o=e!=undefined?e.CurrencyCode:"USD",n.length==1||t==undefined?n.toString():i==undefined?(r=kendo.toString(n,t),r=r.indexOf("-")>-1?"("+r.replace("-","")+")":r,RuleConfiguration.FeatureConfigurationCurrencyCodeDisplay&&(r=r.replace(f,o+" ")),r):(u=kendo.toString(n,t,i),u=u.indexOf("-")>-1?"("+u.replace("-","")+")":u,RuleConfiguration.FeatureConfigurationCurrencyCodeDisplay&&(u=u.replace(f,o+" ")),u))}var i=ddlCurrencyCulture,r=ddlCurrencyCodeNum,t=$('input[name="__RequestVerificationToken"]').val();$.ajax({url:"../Compensation/GetBudgetSpentData",type:"post",cache:!1,data:{__RequestVerificationToken:t,employeeNum:$("#hndSelectedManagerNum").val(),compMenuType:$("#hndMenuType").val(),currencyCulture:ddlCurrencyCulture,currencyCodeNum:ddlCurrencyCodeNum,isRollup:$("#hndIsRollup").val()==1,isSelectedRollup:$("#hndIsSelectedRollup").val()==1},success:function(t){var o,i,h,c,s,l,f,u,r,e;if(t[0].isInDirects||(meritPageConstants.Multicurrency=="False"?$("#inDirectBudgetSection").hide():$("#budgetCheckBox").hide()),t[0]!=null){if(o=$("#ddlLocalCurrencies").data("kendoDropDownList").dataItem($("#ddlLocalCurrencies").data("kendoDropDownList").select()),i=o!=undefined?o.CultureCode:preferredCulture,$("#meritBudget").text(n(t[0].MeritBudget,"c0",i)),r=Math.round(t[0].BudgetPct.toFixed(0)),BudgetPercentage=r,isNaN(r)?$("#budgetPct").text("0%"):$("#budgetPct").text(r+"%"),document.getElementById("budgetDonughtClass"),h=document.getElementById("budgetDonughtClass").className,c="c100 small p100",$("#budgetDonughtClass").removeClass(h),$("#budgetDonughtClass").addClass(c),s=document.getElementById("balanceDonughtClass").className,document.getElementById("hdnPromotionSpent").value=t[0].PromotionSpent,document.getElementById("hdnMeritSpent").value=t[0].MeritSpent,document.getElementById("hdnLumpSumSpent").value=t[0].LumpSumSpent,document.getElementById("hdnAdjustmentSpent").value=t[0].AdjustmentSpent,document.getElementById("hdnMeritBudget").value=t[0].MeritBudget,document.getElementById("hdnBaseSalary").value=t[0].BaseSalary,$("#meritSpentAmt").text(n(t[0].MeritSpent,"c0",i)),$("#promotionSpentAmt").text(n(t[0].PromotionSpent,"c0",i)),$("#lumpsumSpentAmt").text(n(t[0].LumpSumSpent,"c0",i)),$("#totalMeritSpentAmt").text(n(t[0].MeritSpent,"c0",i)),$("#totalPromotionSpentAmt").text(n(t[0].PromotionSpent,"c0",i)),$("#totalLumpsumSpentAmt").text(n(t[0].LumpSumSpent,"c0",i)),$("#totalAdjustmentSpentAmt").text(n(t[0].AdjustmentSpent,"c0",i)),$("#beforeIncreaseMin").text(t[0].BeforeIncreaseMin),$("#beforeIncreaseMid").text(t[0].BeforeIncreaseMid),$("#beforeIncreaseMax").text(t[0].BeforeIncreaseMax),$("#afterIncreaseMin").text(t[0].AfterIncreaseMin),$("#afterIncreaseMid").text(t[0].AfterIncreaseMid),$("#afterIncreaseMax").text(t[0].AfterIncreaseMax),totalCurrentSalary=t[0].TotalCurrentSalary,totalNewSalary=t[0].TotalNewSalary,$("#currentSalary").text(n(t[0].TotalCurrentSalary,"c0",i)),$("#newSalary").text(n(t[0].TotalNewSalary,"c0",i)),r=(t[0].TotalNewSalary-t[0].TotalCurrentSalary)/t[0].TotalCurrentSalary*100,isNaN(r)?($("#increasePct").text(0..toFixed(2)+"%"),$("#increasePct").css("color","#646d78")):r<0?($("#increasePct").text("("+((t[0].TotalNewSalary-t[0].TotalCurrentSalary)/t[0].TotalCurrentSalary*100).toFixed(2)+"%)"),$("#increasePct").css("color","red")):($("#increasePct").text(((t[0].TotalNewSalary-t[0].TotalCurrentSalary)/t[0].TotalCurrentSalary*100).toFixed(2)+"%"),$("#increasePct").css("color","black")),$("#meritBalance").text(n(t[0].Balance,"c0",i)),$("#totalSpentAmt").text(n(t[0].MeritBudget-t[0].Balance,"c0",i)),l=Math.round(t[0].Balance),l<0)$("#meritBalance").removeClass("counter2"),$("#meritBalance").addClass("counter3"),$("#balancePct").removeClass("counter2"),$("#balancePct").addClass("counter3"),r=Math.abs((t[0].Balance/t[0].BaseSalary*100).toFixed(0)),u="(",isNaN(r)||r.toString()=="Infinity"?$("#balancePct").text("0%"):$("#balancePct").text(u.concat(Math.abs((t[0].Balance/t[0].BaseSalary*100).toFixed(0))+"%)")),f=Math.round(t[0].BudgetPct.toFixed(0)),u=Math.round((t[0].Balance/t[0].BaseSalary*100).toFixed(0)),e=f==u?"c100 small p100":u<0?"c100 small x100 p100":"c100 small p"+r,$("#balanceDonughtClass").removeClass(s),$("#balanceDonughtClass").addClass(e),$("#balanceAmt").text(n(t[0].Balance,"c0",i)),t[0].Balance<0?($("#balanceAmt").css("background","red"),$("#balanceAmt").css("color","white"),$("#balanceDonughtClass").css("border","#1abc9c !important")):($("#balanceAmt").css("background","white"),$("#balanceAmt").css("color","#6E6259"));else{$("#meritBalance").addClass("counter2");$("#meritBalance").removeClass("counter3");$("#balancePct").addClass("counter2");$("#balancePct").removeClass("counter3");r=Math.round((t[0].Balance/t[0].BaseSalary*100).toFixed(0));isNaN(r)||r.toString()=="Infinity"?$("#balancePct").text("0%"):$("#balancePct").text(r+"%");$("#balancePct").css("color","");var f=Math.round(t[0].BudgetPct.toFixed(0)),u=Math.round((t[0].Balance/t[0].BaseSalary*100).toFixed(0)),a=Math.round(u/f*100);e=f==u?"c100 small p100":u<0?"c100 small x100 p100":"c100 small p"+a;$("#balanceDonughtClass").removeClass(s);$("#balanceDonughtClass").addClass(e);$("#balanceAmt").text(n(t[0].Balance,"c0",i));t[0].Balance<0?($("#balanceAmt").css("background","red"),$("#balanceAmt").css("color","white")):($("#balanceAmt").css("background","white"),$("#balanceAmt").css("color","#6E6259"))}createChart(t[0].Balance,t[0].MeritSpent,t[0].LumpSumSpent,t[0].AdjustmentSpent,t[0].PromotionSpent,i)}}})};$('#budgetCollapse label[class="switch"]').click(function(n){objChangeFlag!=!0&&n.stopPropagation()});$(function(){$("#budgetCollapse").accordion({collapsible:!0,heightStyle:"content",active:!1,beforeActivate:function(n){return $(n.originalEvent.target).is(".ui-accordion-header > .ui-icon")},activate:function(n,t){t.oldPanel.length==1?$("#chartTourId").hide():$("#chartTourId").show();onCollapsableClick();$("#budgetCollapse").removeClass("ui-corner-all")}})});$(function(){$("#budgetCollapse").accordion({icons:{header:"iconClosed",activeHeader:"iconOpen"}})});$("#divBudgetData [data-toggle=popover]").popover({html:!0,container:"body",content:function(){return objChangeFlag?$("#rollupDirectMsg").text("Oops! you have not saved your inputs. Save your work to proceed further."):$("#rollupDirectMsg").text("Click to view selected manager Direct or Rollup budget"),$("#merit-rollupDirectchkBox").html()}});OpenMeritMandateCommentPopUp=function(n,t,i){var f=ReporteesPageConstatns.meritmandateType,r=$("#CommentPopup").data("kendoWindow"),u;r.options.rowData=n;r.options.row=i;u=$('input[name="__RequestVerificationToken"]').val();$.ajax({url:"../Compensation/_MeritExceedComment",type:"Post",data:{__RequestVerificationToken:u,empJobNum:n.Empjobnum,commentType:f,rowIndex:t},success:function(t){$("#divMeritComment").html(t);$("#divMeritComment").modal("show");$("#divMeritComment #myModalLabel").text("Notes about "+n.EmployeeName);$("#meritcomment").attr("placeholder","Write a review comments for "+n.EmployeeName)}})};ClearChangeFlag=function(){objChangeFlag=!1};approvalSelectedEmpID=null;approvalPageNo=1;$(document).on("click","#approveClear",function(){$("#approvalEmployeedetails").data("kendoAutoComplete").element[0].value="";var n=$("#grdApproveReportees").data("kendoGrid");previousUid!=null&&n.tbody.find("tr[data-uid="+previousUid+"]")!=undefined&&n.tbody.find("tr[data-uid="+previousUid+"]").removeClass("selected")});$(document).on("click","#reopenClear",function(){$("#reopenEmployeedetails").data("kendoAutoComplete").element[0].value="";var n=$("#grdReopenReportees").data("kendoGrid");previousUid!=null&&n.tbody.find("tr[data-uid="+previousUid+"]")!=undefined&&n.tbody.find("tr[data-uid="+previousUid+"]").removeClass("selected")});$(document).on("click","#submitClear",function(){$("#submitEmployeedetails").data("kendoAutoComplete").element[0].value="";var n=$("#grdSubmitReportees").data("kendoGrid");previousUid!=null&&n.tbody.find("tr[data-uid="+previousUid+"]")!=undefined&&n.tbody.find("tr[data-uid="+previousUid+"]").removeClass("selected")});$(document).on("change","[id$=indApprovalChkbox]",function(){var n,t;if(this.checked){var i=$("#grdApproveReportees").data("kendoGrid"),r=$(this).closest("tr").index(),u=i._data[r];u.ApprovalIsChecked=!0;n=$("[id$=indApprovalChkbox]").length;t=$("[id$=indApprovalChkbox]:checked").length;$("#approveChkAll")[0].checked=n==t?!0:!1}else if(this.checked!=undefined){var i=$("#grdApproveReportees").data("kendoGrid"),r=$(this).closest("tr").index(),u=i._data[r];u.ApprovalIsChecked=!1;n=$("[id$=indApprovalChkbox]").length;t=$("[id$=indApprovalChkbox]:checked").length;$("#approveChkAll")[0].checked=n==t?!0:!1}});$(document).on("change","#approveChkAll",function(){var n="indApprovalChkbox";this.checked?$("[id$="+n+"]").each(function(){this.checked=!0;var n=$("#grdApproveReportees").data("kendoGrid"),t=$(this).closest("tr").index(),i=n._data[t];i.ApprovalIsChecked=!0}):this.checked!=undefined&&$("[id$="+n+"]").each(function(){this.checked=!1;var n=$("#grdApproveReportees").data("kendoGrid"),t=$(this).closest("tr").index(),i=n._data[t];i.ApprovalIsChecked=!1})});$(document).on("click","#clearfilter",function(){clearFilterSort();refreshGrid();$("#filterseperator").css("display","none");$("#clearfilter").css("display","none");$("#filter").show()});$(document).on("click","[id$=btnApproveSelectedEmployees]",function(){var t=$("[id$=indApprovalChkbox]:checked").length,n;if(t>0)n=$("#approvalComment").val(),approveSelectedEmployees(n);else return showAlert("Please select atleast one user"),!1});reopenSelectedEmpID=null;reopenPageNo=1;$(document).on("change","[id$=indReopenChkbox]",function(){var n,t;if(this.checked){var i=$("#grdReopenReportees").data("kendoGrid"),r=$(this).closest("tr").index(),u=i._data[r];u.ApprovalIsChecked=!0;n=$("[id$=indReopenChkbox]").length;t=$("[id$=indReopenChkbox]:checked").length;$("#reopenChkAll")[0].checked=n==t?!0:!1}else if(this.checked!=undefined){var i=$("#grdReopenReportees").data("kendoGrid"),r=$(this).closest("tr").index(),u=i._data[r];u.ApprovalIsChecked=!1;n=$("[id$=indReopenChkbox]").length;t=$("[id$=indReopenChkbox]:checked").length;$("#reopenChkAll")[0].checked=n==t?!0:!1}});$(document).on("change","#reopenChkAll",function(){var n="indReopenChkbox";this.checked?$("[id$="+n+"]").each(function(){this.checked=!0;var n=$("#grdReopenReportees").data("kendoGrid"),t=$(this).closest("tr").index(),i=n._data[t];i.ApprovalIsChecked=!0}):this.checked!=undefined&&$("[id$="+n+"]").each(function(){this.checked=!1;var n=$("#grdReopenReportees").data("kendoGrid"),t=$(this).closest("tr").index(),i=n._data[t];i.ApprovalIsChecked=!1})});$(document).on("click","[id$=btnReopenSelectedEmployees]",function(){var t=$("[id$=indReopenChkbox]:checked").length,n;if(t>0)if(n=$("#reopenComment").val(),n!="")reopenSelectedEmployees(n);else return showAlert("Please provide the comment"),!1;else return showAlert("Please select atleast one user"),!1});submitSelectedEmpID=null;submitPageNo=1;$(document).on("change","[id$=indSubmitChkbox]",function(){var n,t;if(this.checked){var i=$("#grdSubmitReportees").data("kendoGrid"),r=$(this).closest("tr").index(),u=i._data[r];u.SubmitIsChecked=!0;n=$("[id$=indSubmitChkbox]").length;t=$("[id$=indSubmitChkbox]:checked").length;$("#submitChkAll")[0].checked=n==t?!0:!1}else if(this.checked!=undefined){var i=$("#grdSubmitReportees").data("kendoGrid"),r=$(this).closest("tr").index(),u=i._data[r];u.SubmitIsChecked=!1;n=$("[id$=indSubmitChkbox]").length;t=$("[id$=indSubmitChkbox]:checked").length;$("#submitChkAll")[0].checked=n==t?!0:!1}});$(document).on("change","#submitChkAll",function(){var n="indSubmitChkbox";this.checked?$("[id$="+n+"]").each(function(){this.checked=!0;var n=$("#grdSubmitReportees").data("kendoGrid"),t=$(this).closest("tr").index(),i=n._data[t];i.SubmitIsChecked=!0}):this.checked!=undefined&&$("[id$="+n+"]").each(function(){this.checked=!1;var n=$("#grdSubmitReportees").data("kendoGrid"),t=$(this).closest("tr").index(),i=n._data[t];i.SubmitIsChecked=!1})});$(document).on("click","[id$=btnSubmit]",function(){triggerSaveEvent();objChangeFlag=!1});$(document).on("click","[id$=Reject]",function(){triggerSaveEvent();objChangeFlag=!1});$(document).on("click","[id$=btnApprove]",function(){triggerSaveEvent();objChangeFlag=!1});$(document).on("click","#btnCancelSubmit",function(){objChangeFlag=!1});$(document).on("click","#btnCancelApprove",function(){objChangeFlag=!1});$(document).on("click","#btnCancelReopen",function(){objChangeFlag=!1});$(document).on("click","[id$=btnSubmitSelectedEmployees]",function(){var t=$("[id$=indSubmitChkbox]:checked").length,n;if(t>0)n=$("#submissionComment").val(),submitSelectedEmployees(n);else return showAlert("Please select atleast one user"),!1});$(document).on("click","#arrowid",function(){triggerSaveEvent();BindBudgetData();objChangeFlag=!1});$("#element").on("click.someNamespace",function(){console.log("anonymous!")});$(document).on("click","#menu-close",function(){$("#sidebar-wrapper").toggleClass("active")});$(document).on("click","#menu-toggle",function(){$("#sidebar-wrapper").toggleClass("active")});$(document).on("click","#corporateTeam",function(){$("#sidebar-wrapper").toggleClass("active")});$(document).mouseup(function(n){var t=$("#sidebar-wrapper");t.is(n.target)||t.has(n.target).length!==0||t.removeClass("active")});$(document).on("click","#btnPromotionEdit",function(){var t=$("#CommentPopup").data("kendoWindow").options.readOnly,n;return t?!1:($(this).parent().find("input").first().val()!=null&&$("#EmpPromotionCommentNum").val($(this).parent().find("input")[0].value),n=$(this).attr("data-myitemid"),$("#promotionComment").text(n),$("#textboxPromotion").attr("disabled","disabled"),$("#btnPromotionRefresh").show(),!1)});$(document).on("click","#btnPromotionRefresh",function(n){return showSaveWarning(n,"inputChanged")?($("#EmpPromotionCommentNum").val(0),$("#textboxPromotion").attr("disabled",!1),$("#promotionComment").text(""),$("#textboxPromotion").text(""),$("#btnPromotionRefresh").hide(),!1):!1});$(document).on("click","#btnPromotionCommDelete",function(n){var o=$("#CommentPopup").data("kendoWindow").options.Values,r=$("#ReporteeGrid").data("kendoGrid"),u=$(r.tbody).find("tr").eq(o),s=$("#CommentPopup").data("kendoWindow").options.readOnly,t=r.dataItem(u),i,f,e;if(s)return!1;if(promotionCommentsCount<=1&&t.NewTitle!=null)return showAlert("You cannot delete the comment as they are tied to Merit/Promotion increase"),!1;if(!showConfirm(n,"Do you want to delete the comment?"))return!1;if($(this).parent().find("input").first().val()!=null&&(i=$("#EmpPromotionCommentNum").val($(this).parent().find("input")[0].value)[0].value,f=document.getElementById("comment_"+$(this).attr("data-mycommentitemid"))),i!=0&&i!=undefined)e=$('input[name="__RequestVerificationToken"]').val(),$.ajax({url:"../Comment/DeleteComment",data:{__RequestVerificationToken:e,commentKey:i},type:"post",success:function(){Successmessage("Deleted Successfully");inputChanged=!1;$("#divPromotion").modal("hide");promotionCommentsCount=promotionCommentsCount-1;(t!=null||t!=undefined)&&(t.PromotionCommentsCount=t.PromotionCommentsCount-1,t.TotalCommentsCount=t.TotalCommentsCount-1,f.style.display="none",t.PromotionCommentsCount==0&&refreshRow(r,u))}});else return!1});$(document).on("click","#btnPromotionRevert",function(n){var r=$("#CommentPopup").data("kendoWindow").options.readOnly,i;if(r)return!1;var t=$("#CommentPopup").data("kendoWindow").options.rowData,u=$("#CommentPopup").data("kendoWindow").options.row,e=$("#CommentPopup").data("kendoWindow").options.index,f=$("#ReporteeGrid").data("kendoGrid");if(!showConfirm(n,"Are you sure to delete the promotion? If you click OK, it will also delete the promotion title,comments and increase."))return!1;t.PromotionAmtLocal=null;t.PromotionAmtUSD=null;t.HrlyPromotionAmtLocal=null;t.HrlyPromotionAmtUSD=null;t.PromotionPct=null;CalculateNewSalary(t);CalculateTCC(t);i=$('input[name="__RequestVerificationToken"]').val();$.ajax({url:"../Compensation/RevertPromotion",data:{__RequestVerificationToken:i,empJobNum:t.Empjobnum,newSalaryLocal:t.NewSalaryLocal,newHrlyRate:t.NewHourlyRateLocal,newCompRatio:t.NewCompaRatio,TCC:t.TCCLocal},type:"post",success:function(){Successmessage("Deleted Successfully");fn_BudgetPromotionSpentChanges(t.PromotionAmtUSD!=null?t.PromotionAmtUSD:0,0);t.PromotionCommentNum=null;t.TotalCommentsCount=t.TotalCommentsCount-t.PromotionCommentsCount;t.PromotionCommentsCount=0;t.NewGrade=null;t.NewTitle=null;refreshRow(f,u);$("#divPromotion").modal("hide")}})});$(document).on("click","#btnPromotionPopupOk",function(){var h=$("#CommentPopup").data("kendoWindow").options.readOnly,i=$("#promotionComment").val(),o=$("#textboxPromotion").val(),r,t,u,f,e;inputChanged=!1;var n=$("#CommentPopup").data("kendoWindow").options.rowData,s=$("#CommentPopup").data("kendoWindow").options.row,c=$("#CommentPopup").data("kendoWindow").options.index;if($.trim($("#textboxPromotion").val())!=""&&$.trim($("#promotionComment").val())!="")if(i==""||o=="")showAlert("You are doing great! Please enter 'Promote to' and comment to complete the promotion process");else{if(i.length>2e3)return showAlert("Comment should not exceed the character limit"),!1;r=$("#EmpPromotionCommentNum").val();t=$("#textboxPromotion").val();t!=""&&(u=$("#ReporteeGrid").data("kendoGrid"),f=$("#promotionComment").val(),n.PromotionCommentNum=r,n.PromotionComment=f,n.NewGrade=t,n.NewTitle=t,n.PromotionCommentsCount=n.PromotionCommentsCount+1,n.TotalCommentsCount=n.TotalCommentsCount+1,n.dirty=!0,refreshRow(u,s),e=$('input[name="__RequestVerificationToken"]').val(),$.ajax({url:"../Compensation/PromotionComment",data:{__RequestVerificationToken:e,empJobNum:n.Empjobnum,employeeCompCommentNum:n.PromotionCommentNum,comments:n.PromotionComment,grade:n.NewGrade},type:"Post",async:!0,cache:!0,success:function(){$("#divPromotion").modal("hide")}}))}});$(document).on("click","#btnSubmit",function(){$.ajax({url:"../Compensation/_SubmitPopUp",type:"Get",success:function(n){$("#divSubmitPopup").html(n);$("#divSubmitPopup").modal("show")}})});$(document).on("click","#btnApprove",function(){$.ajax({url:"../Compensation/_ApprovePopUp",type:"Get",success:function(n){$("#divApprovePopup").html(n);$("#divApprovePopup").modal("show")}})});$(document).on("click","#Reject",function(){$.ajax({url:"../Compensation/_ReopenPopUp",type:"Get",success:function(n){$("#divReopenPopup").html(n);$("#divReopenPopup").modal("show")}})});$(document).on("click","#filter",function(){$("body").css("overflow","hidden");$.ajax({url:"../Compensation/_FilterSort",type:"Get",cache:!1,async:!0,dataType:"html",success:function(n){$("#wndFilterSort").html(n);var t=$("#wndFilterSort").data("kendoWindow");t.options.gridName="ReporteeGrid";t.center().open();$("#filterseperator").css("display","inline")}})});ClearChangeFlag=function(){objChangeFlag=!1};$(document).on("keyup","#ManagerTreesearch",function(){$("span.k-in > span.highlight").each(function(){$(this).parent().text($(this).parent().text())});var n=this.value,t=n.length;$.trim($(this).val())==""&&$("#ddlCompManagerTreeView .k-ext-treeview").scrollTop(0);$("#ddlCompManagerTreeView span.k-in").each(function(){var i=$("#ddlCompManagerTreeView .k-ext-treeview").data("kendoTreeView").dataItem($(this)),t;$("#ddlCompManagerTreeView .k-ext-treeview").scrollTop($("#ddlCompManagerTreeView").find('span.k-in:icontains("'+n+'")').offset().top);t=ShowStatusCompManagerTree(i,n);$(this).html(t)})});$(document).on("click","#usdAmt",function(){var n=$("#ReporteeGrid").data("kendoGrid");GridDisplay=managerActionTypeUSD;n.refresh();displayLocal();$("#usdAmt").css("display","none");$("#localAmt").css("display","inline");$("#clearfilter").css("display","none")});$(document).on("click","#localAmt",function(){GridDisplay=managerActionTypeLocal;var n=$("#ReporteeGrid").data("kendoGrid");n.refresh();displayUSD();$("#usdAmt").css("display","inline");$("#localAmt").css("display","none");$("#clearfilter").css("display","none")});saveWarning=function(){return objChangeFlag==!0&&confirm(globalWarningMessage)?!1:(ClearChangeFlag(),!0)};$(document).on("change","#ddlColumns",function(){var n=$("#ddlColumns").data("kendoDropDownList");if(n.select()>0){var t=$(this).closest(".k-window-content").data("kendoWindow"),i=t.options.gridName,r=$("#"+i).data("kendoGrid"),u=r.options.dataSource.schema.model.fields,f=u[n.dataItem(n.select()).Value].type;showOrHideOperations(f,n.dataItem(n.select()).Value);columnValue=n.dataItem(n.select()).Value}$("#ddlOperations").data("kendoDropDownList").select(0);n.dataItem(n.select()).Value=="WorkFlow"?($("#txtSearch").hide(),$("#drpSearchValue").show(),$("#ddlValues").data("kendoDropDownList").select(0),$("#ddlValues").data("kendoDropDownList").enable(!1)):($("#txtSearch").show(),$("#drpSearchValue").hide(),$("#txtSearch").val(""),$("#txtSearch").prop("disabled",!0));$("#ddlOperations").data("kendoDropDownList").enable(n.select()>0)});$(document).on("change","#ddlOperations",function(){var t=$("#ddlOperations").data("kendoDropDownList"),i=t.select(),n=$("#ddlOperations").val();columnValue=="WorkFlow"&&n=="eq"?$("#ddlValues").data("kendoDropDownList").enable(!0):($("#txtSearch").val(""),$("#btnAddToList").prop("disabled",!(n=="asc"||n=="desc")),$("#txtSearch").prop("disabled",i>0&&(n=="asc"||n=="desc")))});$(document).on("change","#ddlValues",function(){var n=$("#ddlValues").data("kendoDropDownList"),t=n.select(),i=$("#ddlValues").val();t>0?$("#btnAddToList").prop("disabled",!1):$("#btnAddToList").prop("disabled",!0)});$(document).on("keyup","#txtSearch",function(){$("#btnAddToList").prop("disabled",!(this.value.length>0))});$(document).on("click","#btnAddToList",function(){addFilterSort();var t=$("#ddlOperations").data("kendoDropDownList"),n=$("#ddlColumns").data("kendoDropDownList");$("#btnApply").prop("disabled",!($("#lstFilters option").length>0||$("#lstSorts option").length>0));$("#ddlColumns").data("kendoDropDownList").select(0);$("#ddlOperations").data("kendoDropDownList").select(0);$("#ddlValues").data("kendoDropDownList").select(0);$("#txtSearch").show();$("#drpSearchValue").hide();$("#txtSearch").val("");$("#ddlOperations").data("kendoDropDownList").enable(n.select()>0);$("#txtSearch").prop("disabled",!(t.select()>0)||!(n.select()>0));$("#btnAddToList").prop("disabled",!(t.select()>0||n.select()>0))});$(document).on("click","#btnApply",function(){var o=$(this).closest(".k-window-content").data("kendoWindow"),h=o.options.gridName,n=$("#"+h).data("kendoGrid"),t=n.options.dataSource.schema.model.fields,r={logic:"and",filters:[]},s=[],i=[],u,f,e;$("#lstFilters option").each(function(){i.push(this.value)});i.sort();u=0;$.each(i,function(n){var o={logic:"or",filters:[]},e=n>0?i[n-1].split("|"):null,f=this.split("|"),s=t[f[0]].type=="number"?Number(f[2]):f[2];e!=null&&f[0]==e[0]?r.filters[u].filters.push({field:f[0],type:t[f[0]].type,operator:f[1],value:s}):(o.filters.push({field:f[0],type:t[f[0]].type,operator:f[1],value:s}),r.filters.push(o),e!=null&&f[0]!=e[0]&&u++)});$.each($("#lstSorts option"),function(){var n=this.value.split("|");s.push({field:n[0],type:t[n[0]].type,dir:n[1]})});o.close();f=0;e=0;n.pager!=undefined&&(f=n.pager.dataSource._pageSize,e=n.pager.dataSource._group);n.dataSource.query({page:1,pageSize:f,filter:r,sort:s,group:e});$("body").css("overflow","auto");$("#divFilterSort").empty();$("#clearfilter").show();$("#filter").css("display","none")});$(document).on("click","#btnClose",function(n){if(!showSaveWarning(n,"ddlChanged"))return!1;$(this).closest(".k-window-content").data("kendoWindow").close();$("body").css("overflow","auto");$("#divFilterSort").empty()});